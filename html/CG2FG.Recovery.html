<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>CG2FG.Recovery</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">-- This module recovers a CG TINI proof from FG TINI and the CG ‚Üí FG</a>
<a id="70" class="Comment">-- translation.</a>

<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Lattice.html" class="Module">Lattice</a>

<a id="108" class="Keyword">module</a> <a id="115" href="CG2FG.Recovery.html" class="Module">CG2FG.Recovery</a> <a id="130" class="Symbol">{{</a><a id="132" href="CG2FG.Recovery.html#132" class="Bound">ùë≥</a> <a id="134" class="Symbol">:</a> <a id="136" href="Lattice.html#Lattice" class="Function">Lattice</a><a id="143" class="Symbol">}}</a> <a id="146" class="Symbol">(</a><a id="147" href="CG2FG.Recovery.html#147" class="Bound">A</a> <a id="149" class="Symbol">:</a> <a id="151" href="Lattice.Base.html#Label" class="Field">Label</a><a id="156" class="Symbol">)</a> <a id="158" class="Keyword">where</a>

<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="CG.html" class="Module">CG</a> <a id="180" class="Keyword">hiding</a> <a id="187" class="Symbol">(</a><a id="188" href="Generic.Context.Base.html#_%E2%8A%86_" class="Datatype Operator">_‚äÜ_</a> <a id="192" class="Symbol">;</a> <a id="194" href="CG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">_√ó_</a><a id="197" class="Symbol">)</a>
<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="CG2FG.Correct.html" class="Module">CG2FG.Correct</a>
<a id="225" class="Keyword">open</a> <a id="230" class="Keyword">import</a> <a id="237" href="FG.Security.html" class="Module">FG.Security</a> <a id="249" href="CG2FG.Recovery.html#147" class="Bound">A</a>
<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="CG.LowEq.html" class="Module">CG.LowEq</a> <a id="272" href="CG2FG.Recovery.html#147" class="Bound">A</a> <a id="274" class="Symbol">as</a> <a id="C" href="CG2FG.Recovery.html#C" class="Module">C</a>
<a id="279" class="Keyword">open</a> <a id="284" class="Keyword">import</a> <a id="291" href="Generic.Bijection.html" class="Module">Generic.Bijection</a>

<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Data.Product.html" class="Module">Data.Product</a>
<a id="335" class="Keyword">open</a> <a id="340" href="CG.LowEq.html#_%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%AC_" class="Module Operator">_‚âà‚ü®_‚ü©·¥¨_</a>

<a id="349" class="Keyword">open</a> <a id="354" class="Keyword">import</a> <a id="361" href="CG2FG.Recovery.Lift.html" class="Module">CG2FG.Recovery.Lift</a> <a id="381" href="CG2FG.Recovery.html#147" class="Bound">A</a> <a id="383" class="Keyword">public</a>
<a id="390" class="Keyword">open</a> <a id="395" class="Keyword">import</a> <a id="402" href="CG2FG.Recovery.Unlift.html" class="Module">CG2FG.Recovery.Unlift</a> <a id="424" href="CG2FG.Recovery.html#147" class="Bound">A</a> <a id="426" class="Keyword">public</a>

<a id="434" class="Comment">-- Recovery of TINI</a>
<a id="454" class="Comment">--</a>
<a id="457" class="Comment">-- The proof is structured as follows:</a>
<a id="496" class="Comment">-- 1) Apply the semantics preserving transformation.</a>
<a id="549" class="Comment">-- 2) Lift L-equivalence of initial configurations and environments from CG to FG.</a>
<a id="632" class="Comment">-- 3) Apply FG TINI to CG translated program and obtain FG L-equivalence.</a>
<a id="706" class="Comment">-- 4) Back-translate L-equivalence of final configurations from FG to CG (unlifting).</a>

<a id="793" class="Comment">-- TODO: use TINI shorthand?</a>
<a id="tini-via-fg" href="CG2FG.Recovery.html#tini-via-fg" class="Function">tini-via-fg</a> <a id="834" class="Symbol">:</a> <a id="836" class="Symbol">‚àÄ</a> <a id="838" class="Symbol">{</a><a id="839" href="CG2FG.Recovery.html#839" class="Bound">œÑ</a> <a id="841" href="CG2FG.Recovery.html#841" class="Bound">Œì</a> <a id="843" href="CG2FG.Recovery.html#843" class="Bound">Œ∏‚ÇÅ</a> <a id="846" href="CG2FG.Recovery.html#846" class="Bound">Œ∏‚ÇÇ</a> <a id="849" href="CG2FG.Recovery.html#849" class="Bound">Œ≤</a><a id="850" class="Symbol">}</a> <a id="852" class="Symbol">{</a><a id="853" href="CG2FG.Recovery.html#853" class="Bound">c‚ÇÅ</a> <a id="856" href="CG2FG.Recovery.html#856" class="Bound">c‚ÇÇ</a> <a id="859" class="Symbol">:</a> <a id="861" href="CG.Syntax.html#EConf" class="Function">EConf</a> <a id="867" href="CG2FG.Recovery.html#841" class="Bound">Œì</a> <a id="869" class="Symbol">(</a><a id="870" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="874" href="CG2FG.Recovery.html#839" class="Bound">œÑ</a><a id="875" class="Symbol">)}</a> <a id="878" class="Symbol">{</a><a id="879" href="CG2FG.Recovery.html#879" class="Bound">c‚ÇÅ&#39;</a> <a id="883" href="CG2FG.Recovery.html#883" class="Bound">c‚ÇÇ&#39;</a> <a id="887" class="Symbol">:</a> <a id="889" href="CG.Syntax.html#FConf" class="Function">FConf</a> <a id="895" href="CG2FG.Recovery.html#839" class="Bound">œÑ</a><a id="896" class="Symbol">}</a> <a id="898" class="Symbol">‚Üí</a>
                <a id="916" class="Symbol">{{</a><a id="918" href="CG2FG.Recovery.html#918" class="Bound">valid‚ÇÅ</a> <a id="925" class="Symbol">:</a> <a id="927" href="CG.Valid.html#Valid-Inputs" class="Function">Valid-Inputs</a> <a id="940" href="CG2FG.Recovery.html#853" class="Bound">c‚ÇÅ</a> <a id="943" href="CG2FG.Recovery.html#843" class="Bound">Œ∏‚ÇÅ</a><a id="945" class="Symbol">}}</a> <a id="948" class="Symbol">{{</a><a id="950" href="CG2FG.Recovery.html#950" class="Bound">valid‚ÇÇ</a> <a id="957" class="Symbol">:</a> <a id="959" href="CG.Valid.html#Valid-Inputs" class="Function">Valid-Inputs</a> <a id="972" href="CG2FG.Recovery.html#856" class="Bound">c‚ÇÇ</a> <a id="975" href="CG2FG.Recovery.html#846" class="Bound">Œ∏‚ÇÇ</a><a id="977" class="Symbol">}}</a> <a id="980" class="Symbol">‚Üí</a>
                 <a id="999" href="CG2FG.Recovery.html#853" class="Bound">c‚ÇÅ</a> <a id="1002" href="CG.Semantics.html#_%E2%87%93%E1%B6%A0%E2%9F%A8_%E2%9F%A9_" class="Function Operator">‚áì·∂†‚ü®</a> <a id="1006" href="CG2FG.Recovery.html#843" class="Bound">Œ∏‚ÇÅ</a> <a id="1009" href="CG.Semantics.html#_%E2%87%93%E1%B6%A0%E2%9F%A8_%E2%9F%A9_" class="Function Operator">‚ü©</a> <a id="1011" href="CG2FG.Recovery.html#879" class="Bound">c‚ÇÅ&#39;</a> <a id="1015" class="Symbol">‚Üí</a>
                 <a id="1034" href="CG2FG.Recovery.html#856" class="Bound">c‚ÇÇ</a> <a id="1037" href="CG.Semantics.html#_%E2%87%93%E1%B6%A0%E2%9F%A8_%E2%9F%A9_" class="Function Operator">‚áì·∂†‚ü®</a> <a id="1041" href="CG2FG.Recovery.html#846" class="Bound">Œ∏‚ÇÇ</a> <a id="1044" href="CG.Semantics.html#_%E2%87%93%E1%B6%A0%E2%9F%A8_%E2%9F%A9_" class="Function Operator">‚ü©</a> <a id="1046" href="CG2FG.Recovery.html#883" class="Bound">c‚ÇÇ&#39;</a> <a id="1050" class="Symbol">‚Üí</a>
                 <a id="1069" href="CG2FG.Recovery.html#853" class="Bound">c‚ÇÅ</a> <a id="1072" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B5_" class="Function Operator">C.‚âà‚ü®</a> <a id="1077" href="CG2FG.Recovery.html#849" class="Bound">Œ≤</a> <a id="1079" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B5_" class="Function Operator">‚ü©·¥µ</a> <a id="1082" href="CG2FG.Recovery.html#856" class="Bound">c‚ÇÇ</a> <a id="1085" class="Symbol">‚Üí</a>
                 <a id="1104" href="CG2FG.Recovery.html#843" class="Bound">Œ∏‚ÇÅ</a> <a id="1107" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B1_" class="Datatype Operator">C.‚âà‚ü®</a> <a id="1112" href="CG2FG.Recovery.html#849" class="Bound">Œ≤</a> <a id="1114" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B1_" class="Datatype Operator">‚ü©·¥±</a> <a id="1117" href="CG2FG.Recovery.html#846" class="Bound">Œ∏‚ÇÇ</a> <a id="1120" class="Symbol">‚Üí</a>
                 <a id="1139" href="Data.Product.html#%E2%88%83" class="Function">‚àÉ</a> <a id="1141" class="Symbol">(Œª</a> <a id="1144" href="CG2FG.Recovery.html#1144" class="Bound">Œ≤&#39;</a> <a id="1147" class="Symbol">‚Üí</a> <a id="1149" href="CG2FG.Recovery.html#849" class="Bound">Œ≤</a> <a id="1151" href="Generic.Partial.Bijection.html#_%E2%8A%86_" class="Record Operator">‚äÜ</a> <a id="1153" href="CG2FG.Recovery.html#1144" class="Bound">Œ≤&#39;</a> <a id="1156" href="Data.Product.html#_%C3%97_" class="Function Operator">√ó</a> <a id="1158" href="CG2FG.Recovery.html#879" class="Bound">c‚ÇÅ&#39;</a> <a id="1162" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B6%9C_" class="Datatype Operator">C.‚âà‚ü®</a> <a id="1167" href="CG2FG.Recovery.html#1144" class="Bound">Œ≤&#39;</a> <a id="1170" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B6%9C_" class="Datatype Operator">‚ü©·∂ú</a> <a id="1173" href="CG2FG.Recovery.html#883" class="Bound">c‚ÇÇ&#39;</a><a id="1176" class="Symbol">)</a>
<a id="1178" href="CG2FG.Recovery.html#tini-via-fg" class="Function">tini-via-fg</a> <a id="1190" class="Symbol">{</a><a id="1191" class="Argument">c‚ÇÅ</a> <a id="1194" class="Symbol">=</a> <a id="1196" href="CG2FG.Recovery.html#1196" class="Bound">c‚ÇÅ</a><a id="1198" class="Symbol">}</a> <a id="1200" class="Symbol">{</a><a id="1201" href="CG2FG.Recovery.html#1201" class="Bound">c‚ÇÇ</a><a id="1203" class="Symbol">}</a> <a id="1205" class="Symbol">{{</a><a id="1207" href="CG2FG.Recovery.html#1207" class="Bound">isV‚ÇÅ</a><a id="1211" class="Symbol">}}</a> <a id="1214" class="Symbol">{{</a><a id="1216" href="CG2FG.Recovery.html#1216" class="Bound">isV‚ÇÇ</a><a id="1220" class="Symbol">}}</a> <a id="1223" href="CG2FG.Recovery.html#1223" class="Bound">x‚ÇÅ</a> <a id="1226" href="CG2FG.Recovery.html#1226" class="Bound">x‚ÇÇ</a> <a id="1229" href="CG2FG.Recovery.html#1229" class="Bound">c‚ÇÅ‚âàc‚ÇÇ</a> <a id="1235" href="CG2FG.Recovery.html#1235" class="Bound">Œ∏‚ÇÅ‚âàŒ∏‚ÇÇ</a> <a id="1241" class="Keyword">with</a> <a id="1246" href="CG2FG.Correct.html#%E2%9F%A6%C2%B7%E2%9F%A7-correct" class="Function">‚ü¶¬∑‚üß-correct</a> <a id="1258" href="CG2FG.Recovery.html#1223" class="Bound">x‚ÇÅ</a> <a id="1261" class="Symbol">|</a> <a id="1263" href="CG2FG.Correct.html#%E2%9F%A6%C2%B7%E2%9F%A7-correct" class="Function">‚ü¶¬∑‚üß-correct</a> <a id="1275" href="CG2FG.Recovery.html#1226" class="Bound">x‚ÇÇ</a>
<a id="1278" class="Symbol">...</a> <a id="1282" class="Symbol">|</a> <a id="1284" href="CG2FG.Recovery.html#1284" class="Bound">c‚ÇÅ&#39;</a> <a id="1288" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1290" href="CG2FG.Recovery.html#1290" class="Bound">c‚ÇÅ‚âà‚Ä≤</a> <a id="1295" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1297" href="CG2FG.Recovery.html#1297" class="Bound">x‚ÇÅ&#39;</a> <a id="1301" class="Symbol">|</a> <a id="1303" href="CG2FG.Recovery.html#1303" class="Bound">c‚ÇÇ&#39;</a> <a id="1307" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1309" href="CG2FG.Recovery.html#1309" class="Bound">c‚ÇÇ‚âà‚Ä≤</a> <a id="1314" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1316" href="CG2FG.Recovery.html#1316" class="Bound">x‚ÇÇ&#39;</a> <a id="1320" class="Keyword">with</a> <a id="1325" href="CG2FG.Recovery.Lift.html#lift-Valid-Inputs" class="Function">lift-Valid-Inputs</a> <a id="1343" class="Bound">c‚ÇÅ</a> <a id="1346" class="Symbol">_</a> <a id="1348" class="Bound">isV‚ÇÅ</a> <a id="1353" class="Symbol">|</a>  <a id="1356" href="CG2FG.Recovery.Lift.html#lift-Valid-Inputs" class="Function">lift-Valid-Inputs</a> <a id="1374" class="Bound">c‚ÇÇ</a> <a id="1377" class="Symbol">_</a> <a id="1379" class="Bound">isV‚ÇÇ</a>
<a id="1384" class="Symbol">...</a> <a id="1388" class="Symbol">|</a> <a id="1390" href="CG2FG.Recovery.html#1390" class="Bound">isV‚ÇÅ‚Ä≤</a> <a id="1396" class="Symbol">|</a> <a id="1398" href="CG2FG.Recovery.html#1398" class="Bound">isV‚ÇÇ‚Ä≤</a> <a id="1404" class="Keyword">rewrite</a> <a id="1412" href="CG.LowEq.html#C._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%AC_.pc-%E2%89%A1" class="Field">pc-‚â°</a> <a id="1417" class="Bound">c‚ÇÅ‚âàc‚ÇÇ</a> <a id="1423" class="Keyword">with</a> <a id="1428" href="FG.Security.html#26839" class="Function">tini</a> <a id="1433" class="Symbol">{{</a> <a id="1436" href="CG2FG.Recovery.html#1390" class="Bound">isV‚ÇÅ‚Ä≤</a> <a id="1442" class="Symbol">}}</a> <a id="1445" class="Symbol">{{</a> <a id="1448" href="CG2FG.Recovery.html#1398" class="Bound">isV‚ÇÇ‚Ä≤</a> <a id="1454" class="Symbol">}}</a> <a id="1457" class="Bound">x‚ÇÅ&#39;</a> <a id="1461" class="Bound">x‚ÇÇ&#39;</a> <a id="1465" class="Symbol">(</a><a id="1466" href="CG2FG.Recovery.Lift.html#lift-%E2%89%88%E1%B4%B5" class="Function">lift-‚âà·¥µ</a> <a id="1474" class="Bound">c‚ÇÅ‚âàc‚ÇÇ</a><a id="1479" class="Symbol">)</a> <a id="1481" class="Symbol">(</a><a id="1482" href="CG2FG.Recovery.Lift.html#lift-%E2%89%88%E1%B4%B1" class="Function">lift-‚âà·¥±</a> <a id="1490" class="Bound">Œ∏‚ÇÅ‚âàŒ∏‚ÇÇ</a><a id="1495" class="Symbol">)</a>
<a id="1497" class="Symbol">...</a> <a id="1501" class="Symbol">|</a> <a id="1503" href="CG2FG.Recovery.html#1503" class="Bound">Œ≤&#39;</a> <a id="1506" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1508" href="CG2FG.Recovery.html#1508" class="Bound">Œ≤‚äÜŒ≤&#39;</a> <a id="1513" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1515" href="CG2FG.Recovery.html#1515" class="Bound">c‚ÇÅ&#39;‚âàc‚ÇÇ&#39;</a> <a id="1523" class="Symbol">=</a> <a id="1525" href="CG2FG.Recovery.html#1503" class="Bound">Œ≤&#39;</a> <a id="1528" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1530" href="CG2FG.Recovery.html#1508" class="Bound">Œ≤‚äÜŒ≤&#39;</a> <a id="1535" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">,</a> <a id="1537" href="CG2FG.Recovery.Unlift.html#unlift-%E2%89%88%E1%B6%9C" class="Function">unlift-‚âà·∂ú</a> <a id="1547" href="CG2FG.Recovery.html#1515" class="Bound">c‚ÇÅ&#39;‚âàc‚ÇÇ&#39;</a> <a id="1555" class="Bound">c‚ÇÅ‚âà‚Ä≤</a> <a id="1560" class="Bound">c‚ÇÇ‚âà‚Ä≤</a>
</pre></body></html>