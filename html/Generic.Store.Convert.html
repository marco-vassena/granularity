<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Generic.Store.Convert</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">-- Generic conversion between stores and memory</a>

<a id="50" class="Keyword">open</a> <a id="55" class="Keyword">import</a> <a id="62" href="Lattice.html" class="Module">Lattice</a>

<a id="71" class="Keyword">module</a> <a id="78" href="Generic.Store.Convert.html" class="Module">Generic.Store.Convert</a>
  <a id="102" class="Symbol">{{</a><a id="104" href="Generic.Store.Convert.html#104" class="Bound">𝑳</a> <a id="106" class="Symbol">:</a> <a id="108" href="Lattice.html#Lattice" class="Function">Lattice</a><a id="115" class="Symbol">}}</a>
  <a id="120" class="Symbol">{</a><a id="121" href="Generic.Store.Convert.html#121" class="Bound">Ty₁</a> <a id="125" href="Generic.Store.Convert.html#125" class="Bound">Ty₂</a> <a id="129" class="Symbol">:</a> <a id="131" class="PrimitiveType">Set</a><a id="134" class="Symbol">}</a>
  <a id="138" class="Symbol">{</a><a id="139" href="Generic.Store.Convert.html#139" class="Bound">Value₁</a> <a id="146" class="Symbol">:</a> <a id="148" href="Generic.Store.Convert.html#121" class="Bound">Ty₁</a> <a id="152" class="Symbol">→</a> <a id="154" class="PrimitiveType">Set</a><a id="157" class="Symbol">}</a>
  <a id="161" class="Symbol">{</a><a id="162" href="Generic.Store.Convert.html#162" class="Bound">Value₂</a> <a id="169" class="Symbol">:</a> <a id="171" href="Generic.Store.Convert.html#125" class="Bound">Ty₂</a> <a id="175" class="Symbol">→</a> <a id="177" class="PrimitiveType">Set</a><a id="180" class="Symbol">}</a>
  <a id="184" class="Symbol">(</a><a id="185" href="Generic.Store.Convert.html#185" class="Bound Operator">⟪_⟫ᵗ</a> <a id="190" class="Symbol">:</a> <a id="192" href="Generic.Store.Convert.html#121" class="Bound">Ty₁</a> <a id="196" class="Symbol">→</a> <a id="198" href="Generic.Store.Convert.html#125" class="Bound">Ty₂</a><a id="201" class="Symbol">)</a>
  <a id="205" class="Symbol">(</a><a id="206" href="Generic.Store.Convert.html#206" class="Bound Operator">⟪_⟫ⱽ</a> <a id="211" class="Symbol">:</a> <a id="213" class="Symbol">∀</a> <a id="215" class="Symbol">{</a><a id="216" href="Generic.Store.Convert.html#216" class="Bound">τ</a><a id="217" class="Symbol">}</a> <a id="219" class="Symbol">→</a> <a id="221" href="Generic.Store.Convert.html#139" class="Bound">Value₁</a> <a id="228" href="Generic.Store.Convert.html#216" class="Bound">τ</a> <a id="230" class="Symbol">→</a> <a id="232" href="Lattice.Base.html#Label" class="Field">Label</a> <a id="238" class="Symbol">→</a> <a id="240" href="Generic.Store.Convert.html#162" class="Bound">Value₂</a> <a id="247" href="Generic.Store.Convert.html#185" class="Bound Operator">⟪</a> <a id="249" href="Generic.Store.Convert.html#216" class="Bound">τ</a> <a id="251" href="Generic.Store.Convert.html#185" class="Bound Operator">⟫ᵗ</a><a id="253" class="Symbol">)</a> <a id="255" class="Keyword">where</a>

<a id="262" class="Keyword">open</a> <a id="267" class="Keyword">import</a> <a id="274" href="Generic.Store.Base.html" class="Module">Generic.Store.Base</a> <a id="293" class="Symbol">as</a> <a id="296" class="Module">B</a> <a id="298" class="Keyword">using</a> <a id="304" class="Symbol">(</a><a id="305" href="Generic.Container.Base.html#217" class="InductiveConstructor">[]</a> <a id="308" class="Symbol">;</a> <a id="310" href="Generic.Container.Base.html#236" class="InductiveConstructor Operator">_∷_</a><a id="313" class="Symbol">)</a>

<a id="316" class="Keyword">private</a> <a id="324" class="Keyword">module</a> <a id="S" href="Generic.Store.Convert.html#S" class="Module">S</a> <a id="333" class="Symbol">=</a> <a id="335" href="Generic.Store.Base.html" class="Module">B</a> <a id="337" href="Generic.Store.Convert.html#121" class="Bound">Ty₁</a> <a id="341" href="Generic.Store.Convert.html#139" class="Bound">Value₁</a> <a id="348" class="Keyword">renaming</a> <a id="357" class="Symbol">(</a><a id="358" href="Generic.Container.Base.html#1723" class="Function Operator">∥_∥ᴹ</a> <a id="363" class="Symbol">to</a> <a id="366" href="Generic.Container.Base.html#1723" class="Function Operator">∥_∥</a> <a id="370" class="Symbol">;</a> <a id="372" href="Generic.Container.Base.html#1577" class="Function Operator">snocᴹ</a> <a id="378" class="Symbol">to</a> <a id="381" href="Generic.Container.Base.html#1577" class="Function Operator">_∷ᴿ_</a><a id="385" class="Symbol">)</a>
<a id="387" class="Keyword">private</a> <a id="395" class="Keyword">module</a> <a id="T" href="Generic.Store.Convert.html#T" class="Module">T</a> <a id="404" class="Symbol">=</a> <a id="406" href="Generic.Store.Base.html" class="Module">B</a> <a id="408" href="Generic.Store.Convert.html#125" class="Bound">Ty₂</a> <a id="412" href="Generic.Store.Convert.html#162" class="Bound">Value₂</a> <a id="419" class="Keyword">renaming</a> <a id="428" class="Symbol">(</a><a id="429" href="Generic.Container.Base.html#1723" class="Function Operator">∥_∥ᴹ</a> <a id="434" class="Symbol">to</a> <a id="437" href="Generic.Container.Base.html#1723" class="Function Operator">∥_∥</a> <a id="441" class="Symbol">;</a> <a id="443" href="Generic.Container.Base.html#1577" class="Function Operator">snocᴹ</a> <a id="449" class="Symbol">to</a> <a id="452" href="Generic.Container.Base.html#1577" class="Function Operator">_∷ᴿ_</a><a id="456" class="Symbol">)</a>

<a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="Generic.Container.Convert.html" class="Module">Generic.Container.Convert</a> <a id="497" href="Lattice.Base.html#Label" class="Field">Label</a> <a id="503" class="Symbol">{</a><a id="504" href="Generic.Store.Convert.html#121" class="Bound">Ty₁</a><a id="507" class="Symbol">}</a> <a id="509" class="Symbol">{</a><a id="510" href="Generic.Store.Convert.html#125" class="Bound">Ty₂</a><a id="513" class="Symbol">}</a> <a id="515" class="Symbol">{</a><a id="516" href="Generic.Store.Convert.html#139" class="Bound">Value₁</a><a id="522" class="Symbol">}</a> <a id="524" class="Symbol">{</a><a id="525" href="Generic.Store.Convert.html#162" class="Bound">Value₂</a><a id="531" class="Symbol">}</a> <a id="533" href="Generic.Store.Convert.html#185" class="Bound Operator">⟪_⟫ᵗ</a> <a id="538" href="Generic.Store.Convert.html#206" class="Bound Operator">⟪_⟫ⱽ</a> <a id="543" class="Symbol">as</a> <a id="M" href="Generic.Store.Convert.html#M" class="Module">M</a>
  <a id="550" class="Keyword">renaming</a> <a id="559" class="Symbol">(</a> <a id="561" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E1%B6%9C" class="Function Operator">⟪_⟫ᶜ</a> <a id="566" class="Symbol">to</a> <a id="569" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E1%B6%9C" class="Function Operator">⟪_⟫ᴹ</a>
           <a id="585" class="Symbol">;</a> <a id="587" href="Generic.Container.Convert.Base.html#%E2%88%A5_%E2%88%A5-%E2%89%A1" class="Function Operator">∥_∥-≡</a> <a id="593" class="Symbol">to</a> <a id="596" href="Generic.Container.Convert.Base.html#%E2%88%A5_%E2%88%A5-%E2%89%A1" class="Function Operator">∥_∥-≡ᴹ</a>
           <a id="614" class="Symbol">;</a> <a id="616" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E2%88%88" class="Function Operator">⟪_⟫∈</a> <a id="621" class="Symbol">to</a> <a id="624" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E2%88%88" class="Function Operator">⟪_⟫∈ᴹ</a>
           <a id="641" class="Symbol">;</a> <a id="643" href="Generic.Container.Convert.Base.html#write-%E2%89%A1" class="Function">write-≡</a> <a id="651" class="Symbol">to</a> <a id="654" href="Generic.Container.Convert.Base.html#write-%E2%89%A1" class="Function">write-≡ᴹ</a><a id="662" class="Symbol">)</a> <a id="664" class="Keyword">public</a>

<a id="672" class="Comment">-- Generic pointwise store transformation</a>
<a id="⟪_⟫ˢ" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟪_⟫ˢ</a> <a id="719" class="Symbol">:</a> <a id="721" href="Generic.Store.Base.html#S.Store" class="Function">S.Store</a> <a id="729" class="Symbol">→</a> <a id="731" href="Generic.Store.Base.html#T.Store" class="Function">T.Store</a>
<a id="739" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟪</a> <a id="741" href="Generic.Store.Convert.html#741" class="Bound">Σ</a> <a id="743" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟫ˢ</a> <a id="746" href="Generic.Store.Convert.html#746" class="Bound">ℓ</a> <a id="748" class="Symbol">=</a> <a id="750" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E1%B4%B9" class="Function Operator">⟪</a> <a id="752" href="Generic.Store.Convert.html#741" class="Bound">Σ</a> <a id="754" href="Generic.Store.Convert.html#746" class="Bound">ℓ</a> <a id="756" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E1%B4%B9" class="Function Operator">⟫ᴹ</a>

<a id="760" class="Keyword">infix</a> <a id="766" class="Number">2</a> <a id="768" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟪_⟫ˢ</a>

<a id="774" class="Keyword">open</a> <a id="779" class="Keyword">import</a> <a id="786" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="824" class="Keyword">open</a> <a id="829" class="Keyword">import</a> <a id="836" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>

<a id="update-≡ˢ" href="Generic.Store.Convert.html#update-%E2%89%A1%CB%A2" class="Function">update-≡ˢ</a> <a id="864" class="Symbol">:</a> <a id="866" class="Symbol">∀</a> <a id="868" class="Symbol">{</a><a id="869" href="Generic.Store.Convert.html#869" class="Bound">ℓ</a> <a id="871" href="Generic.Store.Convert.html#871" class="Bound">Σ</a> <a id="873" href="Generic.Store.Convert.html#873" class="Bound">M₁</a> <a id="876" href="Generic.Store.Convert.html#876" class="Bound">M₂</a><a id="878" class="Symbol">}</a> <a id="880" class="Symbol">→</a> <a id="882" href="Generic.Store.Convert.html#873" class="Bound">M₁</a> <a id="885" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="887" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E1%B4%B9" class="Function Operator">⟪</a> <a id="889" href="Generic.Store.Convert.html#876" class="Bound">M₂</a> <a id="892" href="Generic.Container.Convert.Base.html#%E2%9F%AA_%E2%9F%AB%E1%B4%B9" class="Function Operator">⟫ᴹ</a> <a id="895" class="Symbol">→</a> <a id="897" class="Symbol">(</a><a id="898" href="Generic.Store.Convert.html#898" class="Bound">ℓ&#39;</a> <a id="901" class="Symbol">:</a> <a id="903" href="Lattice.Base.html#Label" class="Field">Label</a><a id="908" class="Symbol">)</a> <a id="910" class="Symbol">→</a>
            <a id="924" class="Symbol">((</a><a id="926" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟪</a> <a id="928" href="Generic.Store.Convert.html#871" class="Bound">Σ</a> <a id="930" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟫ˢ</a> <a id="933" href="Generic.Store.Base.html#T._%5B_%E2%86%A6_%5D%CB%A2" class="Function Operator">T.[</a> <a id="937" href="Generic.Store.Convert.html#869" class="Bound">ℓ</a> <a id="939" href="Generic.Store.Base.html#T._%5B_%E2%86%A6_%5D%CB%A2" class="Function Operator">↦</a> <a id="941" href="Generic.Store.Convert.html#873" class="Bound">M₁</a> <a id="944" href="Generic.Store.Base.html#T._%5B_%E2%86%A6_%5D%CB%A2" class="Function Operator">]ˢ</a><a id="946" class="Symbol">)</a> <a id="948" href="Generic.Store.Convert.html#898" class="Bound">ℓ&#39;</a> <a id="951" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="953" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟪</a> <a id="955" href="Generic.Store.Convert.html#871" class="Bound">Σ</a> <a id="957" href="Generic.Store.Base.html#S._%5B_%E2%86%A6_%5D%CB%A2" class="Function Operator">S.[</a> <a id="961" href="Generic.Store.Convert.html#869" class="Bound">ℓ</a> <a id="963" href="Generic.Store.Base.html#S._%5B_%E2%86%A6_%5D%CB%A2" class="Function Operator">↦</a> <a id="965" href="Generic.Store.Convert.html#876" class="Bound">M₂</a> <a id="968" href="Generic.Store.Base.html#S._%5B_%E2%86%A6_%5D%CB%A2" class="Function Operator">]ˢ</a> <a id="971" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟫ˢ</a> <a id="974" href="Generic.Store.Convert.html#898" class="Bound">ℓ&#39;</a><a id="976" class="Symbol">)</a>
<a id="978" href="Generic.Store.Convert.html#update-%E2%89%A1%CB%A2" class="Function">update-≡ˢ</a> <a id="988" class="Symbol">{</a><a id="989" href="Generic.Store.Convert.html#989" class="Bound">ℓ</a><a id="990" class="Symbol">}</a> <a id="992" href="Generic.Store.Convert.html#992" class="Bound">eq</a> <a id="995" href="Generic.Store.Convert.html#995" class="Bound">ℓ&#39;</a> <a id="998" class="Keyword">with</a> <a id="1003" href="Generic.Store.Convert.html#989" class="Bound">ℓ</a> <a id="1005" href="Relation.Binary.html#_%E2%89%9F_" class="Function Operator">≟</a> <a id="1007" href="Generic.Store.Convert.html#995" class="Bound">ℓ&#39;</a>
<a id="1010" class="Symbol">...</a> <a id="1014" class="Symbol">|</a> <a id="1016" href="Relation.Nullary.html#Dec.yes" class="InductiveConstructor">yes</a> <a id="1020" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a> <a id="1025" class="Symbol">=</a> <a id="1027" class="Bound">eq</a>
<a id="1030" class="Symbol">...</a> <a id="1034" class="Symbol">|</a> <a id="1036" href="Relation.Nullary.html#Dec.no" class="InductiveConstructor">no</a> <a id="1039" href="Generic.Store.Convert.html#1039" class="Bound">¬p</a> <a id="1042" class="Symbol">=</a> <a id="1044" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>

<a id="∥_∥-≡" href="Generic.Store.Convert.html#%E2%88%A5_%E2%88%A5-%E2%89%A1" class="Function Operator">∥_∥-≡</a> <a id="1056" class="Symbol">:</a> <a id="1058" class="Symbol">∀</a> <a id="1060" href="Generic.Store.Convert.html#1060" class="Bound">Σ</a> <a id="1062" href="Generic.Store.Convert.html#1062" class="Bound">ℓ</a> <a id="1064" class="Symbol">→</a> <a id="1066" href="Generic.Container.Base.html#T.%E2%88%A5_%E2%88%A5" class="Function Operator">T.∥</a> <a id="1070" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟪</a> <a id="1072" href="Generic.Store.Convert.html#1060" class="Bound">Σ</a> <a id="1074" href="Generic.Store.Convert.html#%E2%9F%AA_%E2%9F%AB%CB%A2" class="Function Operator">⟫ˢ</a> <a id="1077" href="Generic.Store.Convert.html#1062" class="Bound">ℓ</a> <a id="1079" href="Generic.Container.Base.html#T.%E2%88%A5_%E2%88%A5" class="Function Operator">∥</a> <a id="1081" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="1083" href="Generic.Container.Base.html#S.%E2%88%A5_%E2%88%A5" class="Function Operator">S.∥</a> <a id="1087" href="Generic.Store.Convert.html#1060" class="Bound">Σ</a> <a id="1089" href="Generic.Store.Convert.html#1062" class="Bound">ℓ</a> <a id="1091" href="Generic.Container.Base.html#S.%E2%88%A5_%E2%88%A5" class="Function Operator">∥</a>
<a id="1093" href="Generic.Store.Convert.html#%E2%88%A5_%E2%88%A5-%E2%89%A1" class="Function Operator">∥_∥-≡</a> <a id="1099" href="Generic.Store.Convert.html#1099" class="Bound">Σ</a> <a id="1101" href="Generic.Store.Convert.html#1101" class="Bound">ℓ</a> <a id="1103" class="Symbol">=</a> <a id="1105" href="Generic.Container.Convert.Base.html#%E2%88%A5_%E2%88%A5-%E2%89%A1%E1%B4%B9" class="Function Operator">∥</a> <a id="1107" class="Symbol">(</a><a id="1108" href="Generic.Store.Convert.html#1099" class="Bound">Σ</a> <a id="1110" href="Generic.Store.Convert.html#1101" class="Bound">ℓ</a><a id="1111" class="Symbol">)</a> <a id="1113" href="Generic.Container.Convert.Base.html#%E2%88%A5_%E2%88%A5-%E2%89%A1%E1%B4%B9" class="Function Operator">∥-≡ᴹ</a>
</pre></body></html>