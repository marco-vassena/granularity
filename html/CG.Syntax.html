<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>CG.Syntax</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">-- Well-typed syntax</a>

<a id="23" class="Keyword">open</a> <a id="28" class="Keyword">import</a> <a id="35" href="Lattice.html" class="Module">Lattice</a>

<a id="44" class="Keyword">module</a> <a id="51" href="CG.Syntax.html" class="Module">CG.Syntax</a> <a id="61" class="Symbol">{{</a><a id="63" href="CG.Syntax.html#63" class="Bound">𝑳</a> <a id="65" class="Symbol">:</a> <a id="67" href="Lattice.html#Lattice" class="Function">Lattice</a><a id="74" class="Symbol">}}</a> <a id="77" class="Keyword">where</a>

<a id="84" class="Keyword">open</a> <a id="89" class="Keyword">import</a> <a id="96" href="CG.Types.html" class="Module">CG.Types</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="126" class="Keyword">using</a> <a id="132" class="Symbol">(</a><a id="133" href="Agda.Builtin.Nat.html#Nat" class="Datatype">ℕ</a><a id="134" class="Symbol">)</a>

<a id="137" class="Keyword">mutual</a>

  <a id="147" class="Comment">-- (e : Expr Γ τ) represents a term t of type τ in the context Γ,</a>
  <a id="215" class="Comment">-- i.e., Γ ⊢ t ∷ τ. Note that this definition merges syntax and tpying</a>
  <a id="288" class="Comment">-- judgment: only well-typed terms can be constructed with it.</a>
  <a id="353" class="Keyword">data</a> <a id="Expr" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="363" class="Symbol">(</a><a id="364" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="366" class="Symbol">:</a> <a id="368" href="Generic.Context.Base.html#Ctx" class="Function">Ctx</a><a id="371" class="Symbol">)</a> <a id="373" class="Symbol">:</a> <a id="375" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="378" class="Symbol">→</a> <a id="380" class="PrimitiveType">Set</a> <a id="384" class="Keyword">where</a>

    <a id="395" class="Comment">-- Unit</a>
    <a id="Expr.（）" href="CG.Syntax.html#Expr.%EF%BC%88%EF%BC%89" class="InductiveConstructor">（）</a> <a id="410" class="Symbol">:</a> <a id="412" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="417" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="419" href="CG.Types.html#Ty.unit" class="InductiveConstructor">unit</a>

    <a id="429" class="Comment">-- First class labels.</a>
    <a id="Expr.⌞_⌟" href="CG.Syntax.html#Expr.%E2%8C%9E_%E2%8C%9F" class="InductiveConstructor Operator">⌞_⌟</a> <a id="460" class="Symbol">:</a> <a id="462" class="Symbol">(</a><a id="463" href="CG.Syntax.html#463" class="Bound">ℓ</a> <a id="465" class="Symbol">:</a> <a id="467" href="Lattice.Base.html#Label" class="Field">Label</a><a id="472" class="Symbol">)</a> <a id="474" class="Symbol">→</a> <a id="476" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="481" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="483" href="CG.Types.html#Ty.%F0%9D%93%9B" class="InductiveConstructor">𝓛</a>

    <a id="490" class="Comment">--------------------------------------------------------------------------------</a>
    <a id="575" class="Comment">-- Basic λ-calculus</a>

    <a id="600" class="Comment">-- Variables with De Bruijn indexes</a>
    <a id="Expr.var" href="CG.Syntax.html#Expr.var" class="InductiveConstructor">var</a> <a id="644" class="Symbol">:</a> <a id="646" class="Symbol">∀</a> <a id="648" class="Symbol">{</a><a id="649" href="CG.Syntax.html#649" class="Bound">τ</a><a id="650" class="Symbol">}</a> <a id="652" class="Symbol">→</a>  <a id="655" class="Symbol">(</a><a id="656" href="CG.Syntax.html#656" class="Bound">τ∈Γ</a> <a id="660" class="Symbol">:</a> <a id="662" href="CG.Syntax.html#649" class="Bound">τ</a> <a id="664" href="Data.List.Any.Membership.html#_%E2%88%88_" class="Function Operator">∈</a> <a id="666" href="CG.Syntax.html#364" class="Bound">Γ</a><a id="667" class="Symbol">)</a> <a id="669" class="Symbol">→</a> <a id="671" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="676" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="678" href="CG.Syntax.html#649" class="Bound">τ</a>

    <a id="685" class="Comment">-- Functions</a>
    <a id="Expr.Λ" href="CG.Syntax.html#Expr.%CE%9B" class="InductiveConstructor">Λ</a> <a id="704" class="Symbol">:</a> <a id="706" class="Symbol">∀</a> <a id="708" class="Symbol">{</a><a id="709" href="CG.Syntax.html#709" class="Bound">τ₁</a> <a id="712" href="CG.Syntax.html#712" class="Bound">τ₂</a><a id="714" class="Symbol">}</a> <a id="716" class="Symbol">→</a> <a id="718" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="723" class="Symbol">(</a><a id="724" href="CG.Syntax.html#709" class="Bound">τ₁</a> <a id="727" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="729" href="CG.Syntax.html#364" class="Bound">Γ</a><a id="730" class="Symbol">)</a> <a id="732" href="CG.Syntax.html#712" class="Bound">τ₂</a> <a id="735" class="Symbol">→</a> <a id="737" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="742" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="744" class="Symbol">(</a><a id="745" href="CG.Syntax.html#709" class="Bound">τ₁</a> <a id="748" href="CG.Types.html#Ty._%E2%9E%94_" class="InductiveConstructor Operator">➔</a> <a id="750" href="CG.Syntax.html#712" class="Bound">τ₂</a><a id="752" class="Symbol">)</a>

    <a id="759" class="Comment">-- Function application</a>
    <a id="Expr._∘_" href="CG.Syntax.html#Expr._%E2%88%98_" class="InductiveConstructor Operator">_∘_</a> <a id="791" class="Symbol">:</a> <a id="793" class="Symbol">∀</a> <a id="795" class="Symbol">{</a><a id="796" href="CG.Syntax.html#796" class="Bound">τ₁</a> <a id="799" href="CG.Syntax.html#799" class="Bound">τ₂</a><a id="801" class="Symbol">}</a> <a id="803" class="Symbol">→</a> <a id="805" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="810" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="812" class="Symbol">(</a><a id="813" href="CG.Syntax.html#796" class="Bound">τ₁</a> <a id="816" href="CG.Types.html#Ty._%E2%9E%94_" class="InductiveConstructor Operator">➔</a> <a id="818" href="CG.Syntax.html#799" class="Bound">τ₂</a><a id="820" class="Symbol">)</a> <a id="822" class="Symbol">→</a> <a id="824" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="829" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="831" href="CG.Syntax.html#796" class="Bound">τ₁</a> <a id="834" class="Symbol">→</a> <a id="836" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="841" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="843" href="CG.Syntax.html#799" class="Bound">τ₂</a>

    <a id="851" class="Comment">--------------------------------------------------------------------------------</a>
    <a id="936" class="Comment">-- Pairs</a>

    <a id="Expr.⟨_,_⟩" href="CG.Syntax.html#Expr.%E2%9F%A8_%2C_%E2%9F%A9" class="InductiveConstructor Operator">⟨_,_⟩</a> <a id="956" class="Symbol">:</a> <a id="958" class="Symbol">∀</a> <a id="960" class="Symbol">{</a><a id="961" href="CG.Syntax.html#961" class="Bound">τ₁</a> <a id="964" href="CG.Syntax.html#964" class="Bound">τ₂</a><a id="966" class="Symbol">}</a> <a id="968" class="Symbol">→</a> <a id="970" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="975" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="977" href="CG.Syntax.html#961" class="Bound">τ₁</a> <a id="980" class="Symbol">→</a> <a id="982" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="987" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="989" href="CG.Syntax.html#964" class="Bound">τ₂</a> <a id="992" class="Symbol">→</a> <a id="994" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="999" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1001" class="Symbol">(</a><a id="1002" href="CG.Syntax.html#961" class="Bound">τ₁</a> <a id="1005" href="CG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">×</a> <a id="1007" href="CG.Syntax.html#964" class="Bound">τ₂</a><a id="1009" class="Symbol">)</a>

    <a id="Expr.fst" href="CG.Syntax.html#Expr.fst" class="InductiveConstructor">fst</a> <a id="1020" class="Symbol">:</a> <a id="1022" class="Symbol">∀</a> <a id="1024" class="Symbol">{</a><a id="1025" href="CG.Syntax.html#1025" class="Bound">τ₁</a> <a id="1028" href="CG.Syntax.html#1028" class="Bound">τ₂</a><a id="1030" class="Symbol">}</a> <a id="1032" class="Symbol">→</a> <a id="1034" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1039" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1041" class="Symbol">(</a><a id="1042" href="CG.Syntax.html#1025" class="Bound">τ₁</a> <a id="1045" href="CG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">×</a> <a id="1047" href="CG.Syntax.html#1028" class="Bound">τ₂</a><a id="1049" class="Symbol">)</a> <a id="1051" class="Symbol">→</a> <a id="1053" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1058" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1060" href="CG.Syntax.html#1025" class="Bound">τ₁</a>

    <a id="Expr.snd" href="CG.Syntax.html#Expr.snd" class="InductiveConstructor">snd</a> <a id="1072" class="Symbol">:</a> <a id="1074" class="Symbol">∀</a> <a id="1076" class="Symbol">{</a><a id="1077" href="CG.Syntax.html#1077" class="Bound">τ₁</a> <a id="1080" href="CG.Syntax.html#1080" class="Bound">τ₂</a><a id="1082" class="Symbol">}</a> <a id="1084" class="Symbol">→</a> <a id="1086" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1091" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1093" class="Symbol">(</a><a id="1094" href="CG.Syntax.html#1077" class="Bound">τ₁</a> <a id="1097" href="CG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">×</a> <a id="1099" href="CG.Syntax.html#1080" class="Bound">τ₂</a><a id="1101" class="Symbol">)</a> <a id="1103" class="Symbol">→</a> <a id="1105" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1110" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1112" href="CG.Syntax.html#1080" class="Bound">τ₂</a>

    <a id="1120" class="Comment">--------------------------------------------------------------------------------</a>
    <a id="1205" class="Comment">-- Sum</a>

    <a id="Expr.inl" href="CG.Syntax.html#Expr.inl" class="InductiveConstructor">inl</a> <a id="1221" class="Symbol">:</a> <a id="1223" class="Symbol">∀</a> <a id="1225" class="Symbol">{</a><a id="1226" href="CG.Syntax.html#1226" class="Bound">τ₁</a> <a id="1229" href="CG.Syntax.html#1229" class="Bound">τ₂</a><a id="1231" class="Symbol">}</a> <a id="1233" class="Symbol">→</a> <a id="1235" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1240" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1242" href="CG.Syntax.html#1226" class="Bound">τ₁</a> <a id="1245" class="Symbol">→</a> <a id="1247" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1252" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1254" class="Symbol">(</a><a id="1255" href="CG.Syntax.html#1226" class="Bound">τ₁</a> <a id="1258" href="CG.Types.html#Ty._%2B_" class="InductiveConstructor Operator">+</a> <a id="1260" href="CG.Syntax.html#1229" class="Bound">τ₂</a><a id="1262" class="Symbol">)</a>

    <a id="Expr.inr" href="CG.Syntax.html#Expr.inr" class="InductiveConstructor">inr</a> <a id="1273" class="Symbol">:</a> <a id="1275" class="Symbol">∀</a> <a id="1277" class="Symbol">{</a><a id="1278" href="CG.Syntax.html#1278" class="Bound">τ₁</a> <a id="1281" href="CG.Syntax.html#1281" class="Bound">τ₂</a><a id="1283" class="Symbol">}</a> <a id="1285" class="Symbol">→</a> <a id="1287" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1292" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1294" href="CG.Syntax.html#1281" class="Bound">τ₂</a> <a id="1297" class="Symbol">→</a> <a id="1299" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1304" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1306" class="Symbol">(</a><a id="1307" href="CG.Syntax.html#1278" class="Bound">τ₁</a> <a id="1310" href="CG.Types.html#Ty._%2B_" class="InductiveConstructor Operator">+</a> <a id="1312" href="CG.Syntax.html#1281" class="Bound">τ₂</a><a id="1314" class="Symbol">)</a>

    <a id="Expr.case" href="CG.Syntax.html#Expr.case" class="InductiveConstructor">case</a> <a id="1326" class="Symbol">:</a> <a id="1328" class="Symbol">∀</a> <a id="1330" class="Symbol">{</a><a id="1331" href="CG.Syntax.html#1331" class="Bound">τ₁</a> <a id="1334" href="CG.Syntax.html#1334" class="Bound">τ₂</a> <a id="1337" href="CG.Syntax.html#1337" class="Bound">τ₃</a><a id="1339" class="Symbol">}</a> <a id="1341" class="Symbol">→</a> <a id="1343" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1348" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1350" class="Symbol">(</a><a id="1351" href="CG.Syntax.html#1331" class="Bound">τ₁</a> <a id="1354" href="CG.Types.html#Ty._%2B_" class="InductiveConstructor Operator">+</a> <a id="1356" href="CG.Syntax.html#1334" class="Bound">τ₂</a><a id="1358" class="Symbol">)</a> <a id="1360" class="Symbol">→</a> <a id="1362" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1367" class="Symbol">(</a><a id="1368" href="CG.Syntax.html#1331" class="Bound">τ₁</a> <a id="1371" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1373" href="CG.Syntax.html#364" class="Bound">Γ</a><a id="1374" class="Symbol">)</a> <a id="1376" href="CG.Syntax.html#1337" class="Bound">τ₃</a> <a id="1379" class="Symbol">→</a> <a id="1381" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1386" class="Symbol">(</a><a id="1387" href="CG.Syntax.html#1334" class="Bound">τ₂</a> <a id="1390" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1392" href="CG.Syntax.html#364" class="Bound">Γ</a><a id="1393" class="Symbol">)</a> <a id="1395" href="CG.Syntax.html#1337" class="Bound">τ₃</a> <a id="1398" class="Symbol">→</a> <a id="1400" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1405" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1407" href="CG.Syntax.html#1337" class="Bound">τ₃</a>

    <a id="1415" class="Comment">--------------------------------------------------------------------------------</a>
    <a id="1500" class="Comment">-- Lifts a Thunk (LIO computation) to Expr.</a>

    <a id="Expr.⌞_⌟ᵀ" href="CG.Syntax.html#Expr.%E2%8C%9E_%E2%8C%9F%E1%B5%80" class="InductiveConstructor Operator">⌞_⌟ᵀ</a> <a id="1554" class="Symbol">:</a> <a id="1556" class="Symbol">∀</a> <a id="1558" class="Symbol">{</a><a id="1559" href="CG.Syntax.html#1559" class="Bound">τ</a><a id="1560" class="Symbol">}</a> <a id="1562" class="Symbol">→</a> <a id="1564" class="Symbol">(</a><a id="1565" href="CG.Syntax.html#1565" class="Bound">t</a> <a id="1567" class="Symbol">:</a> <a id="1569" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="1575" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1577" class="Symbol">(</a><a id="1578" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="1582" href="CG.Syntax.html#1559" class="Bound">τ</a><a id="1583" class="Symbol">))</a> <a id="1586" class="Symbol">→</a> <a id="1588" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1593" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1595" class="Symbol">(</a><a id="1596" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="1600" href="CG.Syntax.html#1559" class="Bound">τ</a><a id="1601" class="Symbol">)</a>

    <a id="1608" class="Comment">--------------------------------------------------------------------------------</a>
    <a id="1693" class="Comment">-- Explicit weakening</a>

    <a id="Expr.wken" href="CG.Syntax.html#Expr.wken" class="InductiveConstructor">wken</a> <a id="1725" class="Symbol">:</a> <a id="1727" class="Symbol">∀</a> <a id="1729" class="Symbol">{</a><a id="1730" href="CG.Syntax.html#1730" class="Bound">τ</a> <a id="1732" href="CG.Syntax.html#1732" class="Bound">Γ&#39;</a><a id="1734" class="Symbol">}</a> <a id="1736" class="Symbol">→</a> <a id="1738" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1743" href="CG.Syntax.html#1732" class="Bound">Γ&#39;</a> <a id="1746" href="CG.Syntax.html#1730" class="Bound">τ</a> <a id="1748" class="Symbol">→</a> <a id="1750" href="CG.Syntax.html#1732" class="Bound">Γ&#39;</a> <a id="1753" href="Generic.Context.Base.html#_%E2%8A%86_" class="Datatype Operator">⊆</a> <a id="1755" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1757" class="Symbol">→</a> <a id="1759" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1764" href="CG.Syntax.html#364" class="Bound">Γ</a> <a id="1766" href="CG.Syntax.html#1730" class="Bound">τ</a>

  <a id="1771" class="Comment">-- LIO monad</a>
  <a id="1786" class="Keyword">data</a> <a id="Thunk" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="1797" class="Symbol">(</a><a id="1798" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="1800" class="Symbol">:</a> <a id="1802" href="Generic.Context.Base.html#Ctx" class="Function">Ctx</a><a id="1805" class="Symbol">)</a> <a id="1807" class="Symbol">:</a> <a id="1809" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="1812" class="Symbol">→</a> <a id="1814" class="PrimitiveType">Set</a> <a id="1818" class="Keyword">where</a>

    <a id="1829" class="Comment">-- Encapsulates a value in the monad</a>
    <a id="Thunk.return" href="CG.Syntax.html#Thunk.return" class="InductiveConstructor">return</a> <a id="1877" class="Symbol">:</a> <a id="1879" class="Symbol">∀</a> <a id="1881" class="Symbol">{</a><a id="1882" href="CG.Syntax.html#1882" class="Bound">τ</a><a id="1883" class="Symbol">}</a> <a id="1885" class="Symbol">→</a> <a id="1887" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1892" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="1894" href="CG.Syntax.html#1882" class="Bound">τ</a> <a id="1896" class="Symbol">→</a> <a id="1898" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="1904" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="1906" class="Symbol">(</a><a id="1907" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="1911" href="CG.Syntax.html#1882" class="Bound">τ</a><a id="1912" class="Symbol">)</a>

    <a id="1919" class="Comment">-- Monadic bind</a>
    <a id="Thunk.bind" href="CG.Syntax.html#Thunk.bind" class="InductiveConstructor">bind</a> <a id="1944" class="Symbol">:</a> <a id="1946" class="Symbol">∀</a> <a id="1948" class="Symbol">{</a><a id="1949" href="CG.Syntax.html#1949" class="Bound">τ₁</a> <a id="1952" href="CG.Syntax.html#1952" class="Bound">τ₂</a><a id="1954" class="Symbol">}</a> <a id="1956" class="Symbol">→</a> <a id="1958" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1963" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="1965" class="Symbol">(</a><a id="1966" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="1970" href="CG.Syntax.html#1949" class="Bound">τ₁</a><a id="1972" class="Symbol">)</a> <a id="1974" class="Symbol">→</a> <a id="1976" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="1981" class="Symbol">(</a><a id="1982" href="CG.Syntax.html#1949" class="Bound">τ₁</a> <a id="1985" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="1987" href="CG.Syntax.html#1798" class="Bound">Γ</a><a id="1988" class="Symbol">)</a> <a id="1990" class="Symbol">(</a><a id="1991" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="1995" href="CG.Syntax.html#1952" class="Bound">τ₂</a><a id="1997" class="Symbol">)</a> <a id="1999" class="Symbol">→</a> <a id="2001" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2007" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2009" class="Symbol">(</a><a id="2010" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2014" href="CG.Syntax.html#1952" class="Bound">τ₂</a><a id="2016" class="Symbol">)</a>

    <a id="2023" class="Comment">--------------------------------------------------------------------------------</a>
    <a id="2108" class="Comment">-- Basic labeled values</a>

    <a id="2137" class="Comment">-- Unlabel a labeled value</a>
    <a id="Thunk.unlabel" href="CG.Syntax.html#Thunk.unlabel" class="InductiveConstructor">unlabel</a> <a id="2176" class="Symbol">:</a> <a id="2178" class="Symbol">∀</a> <a id="2180" class="Symbol">{</a><a id="2181" href="CG.Syntax.html#2181" class="Bound">τ</a><a id="2182" class="Symbol">}</a> <a id="2184" class="Symbol">→</a> <a id="2186" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="2191" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2193" class="Symbol">(</a><a id="2194" href="CG.Types.html#Ty.Labeled" class="InductiveConstructor">Labeled</a> <a id="2202" href="CG.Syntax.html#2181" class="Bound">τ</a><a id="2203" class="Symbol">)</a> <a id="2205" class="Symbol">→</a> <a id="2207" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2213" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2215" class="Symbol">(</a><a id="2216" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2220" href="CG.Syntax.html#2181" class="Bound">τ</a><a id="2221" class="Symbol">)</a>

    <a id="2228" class="Comment">-- toLabeled creates a labeled value out of an LIO computation</a>
    <a id="Thunk.toLabeled" href="CG.Syntax.html#Thunk.toLabeled" class="InductiveConstructor">toLabeled</a> <a id="2305" class="Symbol">:</a> <a id="2307" class="Symbol">∀</a> <a id="2309" class="Symbol">{</a><a id="2310" href="CG.Syntax.html#2310" class="Bound">τ</a><a id="2311" class="Symbol">}</a> <a id="2313" class="Symbol">→</a> <a id="2315" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="2320" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2322" class="Symbol">(</a><a id="2323" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2327" href="CG.Syntax.html#2310" class="Bound">τ</a><a id="2328" class="Symbol">)</a> <a id="2330" class="Symbol">→</a> <a id="2332" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2338" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2340" class="Symbol">(</a><a id="2341" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2345" class="Symbol">(</a><a id="2346" href="CG.Types.html#Ty.Labeled" class="InductiveConstructor">Labeled</a> <a id="2354" href="CG.Syntax.html#2310" class="Bound">τ</a><a id="2355" class="Symbol">))</a>

   <a id="2362" class="Comment">--------------------------------------------------------------------------------</a>
   <a id="2446" class="Comment">-- Label introspection.</a>

    <a id="2475" class="Comment">-- Retrieve the label of a labeled value</a>
    <a id="Thunk.labelOf" href="CG.Syntax.html#Thunk.labelOf" class="InductiveConstructor">labelOf</a> <a id="2528" class="Symbol">:</a> <a id="2530" class="Symbol">∀</a> <a id="2532" class="Symbol">{</a><a id="2533" href="CG.Syntax.html#2533" class="Bound">τ</a><a id="2534" class="Symbol">}</a> <a id="2536" class="Symbol">→</a> <a id="2538" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="2543" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2545" class="Symbol">(</a><a id="2546" href="CG.Types.html#Ty.Labeled" class="InductiveConstructor">Labeled</a> <a id="2554" href="CG.Syntax.html#2533" class="Bound">τ</a><a id="2555" class="Symbol">)</a> <a id="2557" class="Symbol">→</a> <a id="2559" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2565" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2567" class="Symbol">(</a><a id="2568" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2572" href="CG.Types.html#Ty.%F0%9D%93%9B" class="InductiveConstructor">𝓛</a><a id="2573" class="Symbol">)</a>

    <a id="2580" class="Comment">-- Retrieve the current label of the context, i.e., the program counter</a>
    <a id="Thunk.getLabel" href="CG.Syntax.html#Thunk.getLabel" class="InductiveConstructor">getLabel</a> <a id="2665" class="Symbol">:</a> <a id="2667" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2673" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2675" class="Symbol">(</a><a id="2676" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2680" href="CG.Types.html#Ty.%F0%9D%93%9B" class="InductiveConstructor">𝓛</a><a id="2681" class="Symbol">)</a>

    <a id="2688" class="Comment">-- taint(ℓ) raises the program counter to ℓ</a>
    <a id="Thunk.taint" href="CG.Syntax.html#Thunk.taint" class="InductiveConstructor">taint</a> <a id="2742" class="Symbol">:</a> <a id="2744" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="2749" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2751" href="CG.Types.html#Ty.%F0%9D%93%9B" class="InductiveConstructor">𝓛</a> <a id="2753" class="Symbol">→</a> <a id="2755" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2761" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2763" class="Symbol">(</a><a id="2764" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="2768" href="CG.Types.html#Ty.unit" class="InductiveConstructor">unit</a><a id="2772" class="Symbol">)</a>

   <a id="2778" class="Comment">--------------------------------------------------------------------------------</a>
   <a id="2862" class="Comment">-- Memory operations.</a>

    <a id="2889" class="Comment">-- Creates a new mutable reference at a given security level</a>
    <a id="Thunk.new" href="CG.Syntax.html#Thunk.new" class="InductiveConstructor">new</a> <a id="2958" class="Symbol">:</a> <a id="2960" class="Symbol">∀</a> <a id="2962" class="Symbol">{</a><a id="2963" href="CG.Syntax.html#2963" class="Bound">τ</a><a id="2964" class="Symbol">}</a> <a id="2966" class="Symbol">→</a> <a id="2968" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="2973" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2975" class="Symbol">(</a><a id="2976" href="CG.Types.html#Ty.Labeled" class="InductiveConstructor">Labeled</a> <a id="2984" href="CG.Syntax.html#2963" class="Bound">τ</a><a id="2985" class="Symbol">)</a> <a id="2987" class="Symbol">→</a> <a id="2989" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="2995" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="2997" class="Symbol">(</a><a id="2998" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="3002" class="Symbol">(</a><a id="3003" href="CG.Types.html#Ty.Ref" class="InductiveConstructor">Ref</a> <a id="3007" href="CG.Syntax.html#2963" class="Bound">τ</a><a id="3008" class="Symbol">))</a>

    <a id="3016" class="Comment">-- Reads the content of a mutable reference</a>
    <a id="Thunk.!_" href="CG.Syntax.html#Thunk.%21_" class="InductiveConstructor Operator">!_</a> <a id="3067" class="Symbol">:</a> <a id="3069" class="Symbol">∀</a> <a id="3071" class="Symbol">{</a><a id="3072" href="CG.Syntax.html#3072" class="Bound">τ</a><a id="3073" class="Symbol">}</a> <a id="3075" class="Symbol">→</a> <a id="3077" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="3082" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3084" class="Symbol">(</a><a id="3085" href="CG.Types.html#Ty.Ref" class="InductiveConstructor">Ref</a> <a id="3089" href="CG.Syntax.html#3072" class="Bound">τ</a><a id="3090" class="Symbol">)</a> <a id="3092" class="Symbol">→</a> <a id="3094" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="3100" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3102" class="Symbol">(</a><a id="3103" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="3107" href="CG.Syntax.html#3072" class="Bound">τ</a><a id="3108" class="Symbol">)</a>

    <a id="3115" class="Comment">-- Overvwrites the content of a mutable reference</a>
    <a id="Thunk._≔_" href="CG.Syntax.html#Thunk._%E2%89%94_" class="InductiveConstructor Operator">_≔_</a> <a id="3173" class="Symbol">:</a> <a id="3175" class="Symbol">∀</a> <a id="3177" class="Symbol">{</a><a id="3178" href="CG.Syntax.html#3178" class="Bound">τ</a><a id="3179" class="Symbol">}</a> <a id="3181" class="Symbol">→</a> <a id="3183" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="3188" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3190" class="Symbol">(</a><a id="3191" href="CG.Types.html#Ty.Ref" class="InductiveConstructor">Ref</a> <a id="3195" href="CG.Syntax.html#3178" class="Bound">τ</a><a id="3196" class="Symbol">)</a> <a id="3198" class="Symbol">→</a> <a id="3200" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="3205" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3207" class="Symbol">(</a><a id="3208" href="CG.Types.html#Ty.Labeled" class="InductiveConstructor">Labeled</a> <a id="3216" href="CG.Syntax.html#3178" class="Bound">τ</a><a id="3217" class="Symbol">)</a> <a id="3219" class="Symbol">→</a> <a id="3221" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="3227" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3229" class="Symbol">(</a><a id="3230" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="3234" href="CG.Types.html#Ty.unit" class="InductiveConstructor">unit</a><a id="3238" class="Symbol">)</a>

    <a id="3245" class="Comment">-- Retrieve the label of a labeled reference</a>
    <a id="Thunk.labelOfRef" href="CG.Syntax.html#Thunk.labelOfRef" class="InductiveConstructor">labelOfRef</a> <a id="3305" class="Symbol">:</a> <a id="3307" class="Symbol">∀</a> <a id="3309" class="Symbol">{</a><a id="3310" href="CG.Syntax.html#3310" class="Bound">τ</a><a id="3311" class="Symbol">}</a> <a id="3313" class="Symbol">→</a> <a id="3315" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="3320" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3322" class="Symbol">(</a><a id="3323" href="CG.Types.html#Ty.Ref" class="InductiveConstructor">Ref</a> <a id="3327" href="CG.Syntax.html#3310" class="Bound">τ</a><a id="3328" class="Symbol">)</a> <a id="3330" class="Symbol">→</a> <a id="3332" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="3338" href="CG.Syntax.html#1798" class="Bound">Γ</a> <a id="3340" class="Symbol">(</a><a id="3341" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="3345" href="CG.Types.html#Ty.%F0%9D%93%9B" class="InductiveConstructor">𝓛</a><a id="3346" class="Symbol">)</a>

  <a id="3351" class="Comment">-- Value enviroment</a>
  <a id="3373" class="Keyword">data</a> <a id="Env" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="3382" class="Symbol">:</a> <a id="3384" class="Symbol">(</a><a id="3385" href="CG.Syntax.html#3385" class="Bound">Γ</a> <a id="3387" class="Symbol">:</a> <a id="3389" href="Generic.Context.Base.html#Ctx" class="Function">Ctx</a><a id="3392" class="Symbol">)</a> <a id="3394" class="Symbol">→</a> <a id="3396" class="PrimitiveType">Set</a> <a id="3400" class="Keyword">where</a>
    <a id="Env.[]" href="CG.Syntax.html#Env.%5B%5D" class="InductiveConstructor">[]</a> <a id="3413" class="Symbol">:</a> <a id="3415" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="3419" href="Agda.Builtin.List.html#%5B%5D" class="InductiveConstructor">[]</a>
    <a id="Env._∷_" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">_∷_</a>  <a id="3431" class="Symbol">:</a> <a id="3433" class="Symbol">∀</a> <a id="3435" class="Symbol">{</a><a id="3436" href="CG.Syntax.html#3436" class="Bound">Γ</a> <a id="3438" href="CG.Syntax.html#3438" class="Bound">τ</a><a id="3439" class="Symbol">}</a> <a id="3441" class="Symbol">→</a> <a id="3443" class="Symbol">(</a><a id="3444" href="CG.Syntax.html#3444" class="Bound">v</a> <a id="3446" class="Symbol">:</a> <a id="3448" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3454" href="CG.Syntax.html#3438" class="Bound">τ</a><a id="3455" class="Symbol">)</a> <a id="3457" class="Symbol">(</a><a id="3458" href="CG.Syntax.html#3458" class="Bound">θ</a> <a id="3460" class="Symbol">:</a> <a id="3462" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="3466" href="CG.Syntax.html#3436" class="Bound">Γ</a><a id="3467" class="Symbol">)</a> <a id="3469" class="Symbol">→</a> <a id="3471" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="3475" class="Symbol">(</a><a id="3476" href="CG.Syntax.html#3438" class="Bound">τ</a> <a id="3478" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="3480" href="CG.Syntax.html#3436" class="Bound">Γ</a><a id="3481" class="Symbol">)</a>

  <a id="3486" class="Comment">-- Value.</a>
  <a id="3498" class="Keyword">data</a> <a id="Value" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3509" class="Symbol">:</a> <a id="3511" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="3514" class="Symbol">→</a> <a id="3516" class="PrimitiveType">Set</a> <a id="3520" class="Keyword">where</a>

    <a id="Value.（）" href="CG.Syntax.html#Value.%EF%BC%88%EF%BC%89" class="InductiveConstructor">（）</a> <a id="3534" class="Symbol">:</a> <a id="3536" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3542" href="CG.Types.html#Ty.unit" class="InductiveConstructor">unit</a>

    <a id="3552" class="Comment">-- Function closure</a>
    <a id="Value.⟨_,_⟩ᶜ" href="CG.Syntax.html#Value.%E2%9F%A8_%2C_%E2%9F%A9%E1%B6%9C" class="InductiveConstructor Operator">⟨_,_⟩ᶜ</a> <a id="3583" class="Symbol">:</a> <a id="3585" class="Symbol">∀</a> <a id="3587" class="Symbol">{</a><a id="3588" href="CG.Syntax.html#3588" class="Bound">Γ</a> <a id="3590" href="CG.Syntax.html#3590" class="Bound">τ₁</a> <a id="3593" href="CG.Syntax.html#3593" class="Bound">τ₂</a><a id="3595" class="Symbol">}</a> <a id="3597" class="Symbol">→</a> <a id="3599" class="Symbol">(</a><a id="3600" href="CG.Syntax.html#3600" class="Bound">e</a> <a id="3602" class="Symbol">:</a> <a id="3604" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="3609" class="Symbol">(</a><a id="3610" href="CG.Syntax.html#3590" class="Bound">τ₁</a> <a id="3613" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="3615" href="CG.Syntax.html#3588" class="Bound">Γ</a><a id="3616" class="Symbol">)</a> <a id="3618" href="CG.Syntax.html#3593" class="Bound">τ₂</a><a id="3620" class="Symbol">)</a> <a id="3622" class="Symbol">(</a><a id="3623" href="CG.Syntax.html#3623" class="Bound">θ</a> <a id="3625" class="Symbol">:</a> <a id="3627" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="3631" href="CG.Syntax.html#3588" class="Bound">Γ</a><a id="3632" class="Symbol">)</a> <a id="3634" class="Symbol">→</a> <a id="3636" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3642" class="Symbol">(</a><a id="3643" href="CG.Syntax.html#3590" class="Bound">τ₁</a> <a id="3646" href="CG.Types.html#Ty._%E2%9E%94_" class="InductiveConstructor Operator">➔</a> <a id="3648" href="CG.Syntax.html#3593" class="Bound">τ₂</a><a id="3650" class="Symbol">)</a>

    <a id="3657" class="Comment">-- Thunk closure</a>
    <a id="Value.⟨_,_⟩ᵀ" href="CG.Syntax.html#Value.%E2%9F%A8_%2C_%E2%9F%A9%E1%B5%80" class="InductiveConstructor Operator">⟨_,_⟩ᵀ</a> <a id="3685" class="Symbol">:</a> <a id="3687" class="Symbol">∀</a> <a id="3689" class="Symbol">{</a><a id="3690" href="CG.Syntax.html#3690" class="Bound">Γ</a> <a id="3692" href="CG.Syntax.html#3692" class="Bound">τ</a><a id="3693" class="Symbol">}</a> <a id="3695" class="Symbol">→</a> <a id="3697" class="Symbol">(</a><a id="3698" href="CG.Syntax.html#3698" class="Bound">t</a> <a id="3700" class="Symbol">:</a> <a id="3702" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="3708" href="CG.Syntax.html#3690" class="Bound">Γ</a> <a id="3710" class="Symbol">(</a><a id="3711" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="3715" href="CG.Syntax.html#3692" class="Bound">τ</a><a id="3716" class="Symbol">))</a> <a id="3719" class="Symbol">(</a><a id="3720" href="CG.Syntax.html#3720" class="Bound">θ</a> <a id="3722" class="Symbol">:</a> <a id="3724" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="3728" href="CG.Syntax.html#3690" class="Bound">Γ</a><a id="3729" class="Symbol">)</a> <a id="3731" class="Symbol">→</a> <a id="3733" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3739" class="Symbol">(</a><a id="3740" href="CG.Types.html#Ty.LIO" class="InductiveConstructor">LIO</a> <a id="3744" href="CG.Syntax.html#3692" class="Bound">τ</a><a id="3745" class="Symbol">)</a>

    <a id="Value.inl" href="CG.Syntax.html#Value.inl" class="InductiveConstructor">inl</a> <a id="3756" class="Symbol">:</a> <a id="3758" class="Symbol">∀</a> <a id="3760" class="Symbol">{</a><a id="3761" href="CG.Syntax.html#3761" class="Bound">τ₁</a> <a id="3764" href="CG.Syntax.html#3764" class="Bound">τ₂</a><a id="3766" class="Symbol">}</a> <a id="3768" class="Symbol">→</a> <a id="3770" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3776" href="CG.Syntax.html#3761" class="Bound">τ₁</a> <a id="3779" class="Symbol">→</a> <a id="3781" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3787" class="Symbol">(</a><a id="3788" href="CG.Syntax.html#3761" class="Bound">τ₁</a> <a id="3791" href="CG.Types.html#Ty._%2B_" class="InductiveConstructor Operator">+</a> <a id="3793" href="CG.Syntax.html#3764" class="Bound">τ₂</a><a id="3795" class="Symbol">)</a>

    <a id="Value.inr" href="CG.Syntax.html#Value.inr" class="InductiveConstructor">inr</a> <a id="3806" class="Symbol">:</a> <a id="3808" class="Symbol">∀</a> <a id="3810" class="Symbol">{</a><a id="3811" href="CG.Syntax.html#3811" class="Bound">τ₁</a> <a id="3814" href="CG.Syntax.html#3814" class="Bound">τ₂</a><a id="3816" class="Symbol">}</a> <a id="3818" class="Symbol">→</a> <a id="3820" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3826" href="CG.Syntax.html#3814" class="Bound">τ₂</a> <a id="3829" class="Symbol">→</a> <a id="3831" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3837" class="Symbol">(</a><a id="3838" href="CG.Syntax.html#3811" class="Bound">τ₁</a> <a id="3841" href="CG.Types.html#Ty._%2B_" class="InductiveConstructor Operator">+</a> <a id="3843" href="CG.Syntax.html#3814" class="Bound">τ₂</a><a id="3845" class="Symbol">)</a>

    <a id="Value.⟨_,_⟩" href="CG.Syntax.html#Value.%E2%9F%A8_%2C_%E2%9F%A9" class="InductiveConstructor Operator">⟨_,_⟩</a> <a id="3858" class="Symbol">:</a> <a id="3860" class="Symbol">∀</a> <a id="3862" class="Symbol">{</a><a id="3863" href="CG.Syntax.html#3863" class="Bound">τ₁</a> <a id="3866" href="CG.Syntax.html#3866" class="Bound">τ₂</a><a id="3868" class="Symbol">}</a> <a id="3870" class="Symbol">→</a> <a id="3872" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3878" href="CG.Syntax.html#3863" class="Bound">τ₁</a> <a id="3881" class="Symbol">→</a> <a id="3883" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3889" href="CG.Syntax.html#3866" class="Bound">τ₂</a> <a id="3892" class="Symbol">→</a> <a id="3894" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3900" class="Symbol">(</a><a id="3901" href="CG.Syntax.html#3863" class="Bound">τ₁</a> <a id="3904" href="CG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">×</a> <a id="3906" href="CG.Syntax.html#3866" class="Bound">τ₂</a><a id="3908" class="Symbol">)</a>

    <a id="3915" class="Comment">-- Labeled value</a>
    <a id="Value.Labeled" href="CG.Syntax.html#Value.Labeled" class="InductiveConstructor">Labeled</a> <a id="3944" class="Symbol">:</a> <a id="3946" class="Symbol">∀</a> <a id="3948" class="Symbol">{</a><a id="3949" href="CG.Syntax.html#3949" class="Bound">τ</a><a id="3950" class="Symbol">}</a> <a id="3952" class="Symbol">(</a><a id="3953" href="CG.Syntax.html#3953" class="Bound">ℓ</a> <a id="3955" class="Symbol">:</a> <a id="3957" href="Lattice.Base.html#Label" class="Field">Label</a><a id="3962" class="Symbol">)</a> <a id="3964" class="Symbol">→</a> <a id="3966" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3972" href="CG.Syntax.html#3949" class="Bound">τ</a> <a id="3974" class="Symbol">→</a> <a id="3976" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="3982" class="Symbol">(</a><a id="3983" href="CG.Types.html#Ty.Labeled" class="InductiveConstructor">Labeled</a> <a id="3991" href="CG.Syntax.html#3949" class="Bound">τ</a><a id="3992" class="Symbol">)</a>

    <a id="3999" class="Comment">-- Labeled reference</a>
    <a id="Value.Ref" href="CG.Syntax.html#Value.Ref" class="InductiveConstructor">Ref</a> <a id="4028" class="Symbol">:</a> <a id="4030" class="Symbol">∀</a> <a id="4032" class="Symbol">{</a><a id="4033" href="CG.Syntax.html#4033" class="Bound">τ</a><a id="4034" class="Symbol">}</a> <a id="4036" class="Symbol">(</a><a id="4037" href="CG.Syntax.html#4037" class="Bound">ℓ</a> <a id="4039" class="Symbol">:</a> <a id="4041" href="Lattice.Base.html#Label" class="Field">Label</a><a id="4046" class="Symbol">)</a> <a id="4048" class="Symbol">(</a><a id="4049" href="CG.Syntax.html#4049" class="Bound">n</a> <a id="4051" class="Symbol">:</a> <a id="4053" href="Agda.Builtin.Nat.html#%E2%84%95" class="Datatype">ℕ</a><a id="4054" class="Symbol">)</a> <a id="4056" class="Symbol">→</a> <a id="4058" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="4064" class="Symbol">(</a><a id="4065" href="CG.Types.html#Ty.Ref" class="InductiveConstructor">Ref</a> <a id="4069" href="CG.Syntax.html#4033" class="Bound">τ</a><a id="4070" class="Symbol">)</a>

    <a id="4077" class="Comment">-- First class labels</a>
    <a id="Value.⌞_⌟" href="CG.Syntax.html#Value.%E2%8C%9E_%E2%8C%9F" class="InductiveConstructor Operator">⌞_⌟</a> <a id="4107" class="Symbol">:</a> <a id="4109" class="Symbol">(</a><a id="4110" href="CG.Syntax.html#4110" class="Bound">ℓ</a> <a id="4112" class="Symbol">:</a> <a id="4114" href="Lattice.Base.html#Label" class="Field">Label</a><a id="4119" class="Symbol">)</a> <a id="4121" class="Symbol">→</a> <a id="4123" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="4129" href="CG.Types.html#Ty.%F0%9D%93%9B" class="InductiveConstructor">𝓛</a>


<a id="4133" class="Keyword">infixr</a> <a id="4140" class="Number">5</a> <a id="4142" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">_∷_</a>

<a id="4147" class="Comment">--------------------------------------------------------------------------------</a>
<a id="4228" class="Comment">-- Configurations</a>

<a id="4247" class="Comment">-- Generic store.</a>
<a id="4265" class="Keyword">open</a> <a id="4270" class="Keyword">import</a> <a id="4277" href="Generic.Store.html" class="Module">Generic.Store</a> <a id="4291" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="4294" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="4300" class="Keyword">public</a>

<a id="4308" class="Comment">-- Generic configuration container.</a>
<a id="4344" class="Keyword">record</a> <a id="Conf" href="CG.Syntax.html#Conf" class="Record">Conf</a> <a id="4356" class="Symbol">(</a><a id="4357" href="CG.Syntax.html#4357" class="Bound">A</a> <a id="4359" class="Symbol">:</a> <a id="4361" class="PrimitiveType">Set</a><a id="4364" class="Symbol">)</a> <a id="4366" class="Symbol">:</a> <a id="4368" class="PrimitiveType">Set</a> <a id="4372" class="Keyword">where</a>
  <a id="4380" class="Keyword">constructor</a> <a id="Conf.⟨_,_,_⟩" href="CG.Syntax.html#Conf.%E2%9F%A8_%2C_%2C_%E2%9F%A9" class="InductiveConstructor Operator">⟨_,_,_⟩</a>
  <a id="4402" class="Keyword">field</a> <a id="Conf.store" href="CG.Syntax.html#Conf.store" class="Field">store</a> <a id="4414" class="Symbol">:</a> <a id="4416" href="Generic.Store.Base.html#Store" class="Function">Store</a>
        <a id="Conf.pc" href="CG.Syntax.html#Conf.pc" class="Field">pc</a> <a id="4433" class="Symbol">:</a> <a id="4435" href="Lattice.Base.html#Label" class="Field">Label</a>
        <a id="Conf.term" href="CG.Syntax.html#Conf.term" class="Field">term</a> <a id="4454" class="Symbol">:</a> <a id="4456" href="CG.Syntax.html#4357" class="Bound">A</a>

<a id="4459" class="Comment">-- Initial Configuration (Expr)</a>
<a id="EConf" href="CG.Syntax.html#EConf" class="Function">EConf</a> <a id="4497" class="Symbol">:</a> <a id="4499" href="Generic.Context.Base.html#Ctx" class="Function">Ctx</a> <a id="4503" class="Symbol">→</a> <a id="4505" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="4508" class="Symbol">→</a> <a id="4510" class="PrimitiveType">Set</a>
<a id="4514" href="CG.Syntax.html#EConf" class="Function">EConf</a> <a id="4520" href="CG.Syntax.html#4520" class="Bound">Γ</a> <a id="4522" href="CG.Syntax.html#4522" class="Bound">τ</a> <a id="4524" class="Symbol">=</a> <a id="4526" href="CG.Syntax.html#Conf" class="Record">Conf</a> <a id="4531" class="Symbol">(</a><a id="4532" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="4537" href="CG.Syntax.html#4520" class="Bound">Γ</a> <a id="4539" href="CG.Syntax.html#4522" class="Bound">τ</a><a id="4540" class="Symbol">)</a>

<a id="4543" class="Comment">-- Initial Configuration (Thunk)</a>
<a id="TConf" href="CG.Syntax.html#TConf" class="Function">TConf</a> <a id="4582" class="Symbol">:</a> <a id="4584" href="Generic.Context.Base.html#Ctx" class="Function">Ctx</a> <a id="4588" class="Symbol">→</a> <a id="4590" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="4593" class="Symbol">→</a> <a id="4595" class="PrimitiveType">Set</a>
<a id="4599" href="CG.Syntax.html#TConf" class="Function">TConf</a> <a id="4605" href="CG.Syntax.html#4605" class="Bound">Γ</a> <a id="4607" href="CG.Syntax.html#4607" class="Bound">τ</a> <a id="4609" class="Symbol">=</a> <a id="4611" href="CG.Syntax.html#Conf" class="Record">Conf</a> <a id="4616" class="Symbol">(</a><a id="4617" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="4623" href="CG.Syntax.html#4605" class="Bound">Γ</a> <a id="4625" href="CG.Syntax.html#4607" class="Bound">τ</a><a id="4626" class="Symbol">)</a>

<a id="4629" class="Comment">-- Final configuration (Value)</a>
<a id="FConf" href="CG.Syntax.html#FConf" class="Function">FConf</a> <a id="4666" class="Symbol">:</a> <a id="4668" href="CG.Types.html#Ty" class="Datatype">Ty</a> <a id="4671" class="Symbol">→</a> <a id="4673" class="PrimitiveType">Set</a>
<a id="4677" href="CG.Syntax.html#FConf" class="Function">FConf</a> <a id="4683" href="CG.Syntax.html#4683" class="Bound">τ</a> <a id="4685" class="Symbol">=</a> <a id="4687" href="CG.Syntax.html#Conf" class="Record">Conf</a> <a id="4692" class="Symbol">(</a><a id="4693" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="4699" href="CG.Syntax.html#4683" class="Bound">τ</a><a id="4700" class="Symbol">)</a>

<a id="4703" class="Comment">-- Projections</a>

<a id="expr" href="CG.Syntax.html#expr" class="Function">expr</a> <a id="4724" class="Symbol">:</a> <a id="4726" class="Symbol">∀</a> <a id="4728" class="Symbol">{</a><a id="4729" href="CG.Syntax.html#4729" class="Bound">Γ</a> <a id="4731" href="CG.Syntax.html#4731" class="Bound">τ</a><a id="4732" class="Symbol">}</a> <a id="4734" class="Symbol">→</a> <a id="4736" href="CG.Syntax.html#EConf" class="Function">EConf</a> <a id="4742" href="CG.Syntax.html#4729" class="Bound">Γ</a> <a id="4744" href="CG.Syntax.html#4731" class="Bound">τ</a> <a id="4746" class="Symbol">→</a> <a id="4748" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="4753" href="CG.Syntax.html#4729" class="Bound">Γ</a> <a id="4755" href="CG.Syntax.html#4731" class="Bound">τ</a>
<a id="4757" href="CG.Syntax.html#expr" class="Function">expr</a> <a id="4762" class="Symbol">=</a> <a id="4764" href="CG.Syntax.html#Conf.term" class="Field">Conf.term</a>

<a id="thunk" href="CG.Syntax.html#thunk" class="Function">thunk</a> <a id="4781" class="Symbol">:</a>  <a id="4784" class="Symbol">∀</a> <a id="4786" class="Symbol">{</a><a id="4787" href="CG.Syntax.html#4787" class="Bound">Γ</a> <a id="4789" href="CG.Syntax.html#4789" class="Bound">τ</a><a id="4790" class="Symbol">}</a> <a id="4792" class="Symbol">→</a> <a id="4794" href="CG.Syntax.html#TConf" class="Function">TConf</a> <a id="4800" href="CG.Syntax.html#4787" class="Bound">Γ</a> <a id="4802" href="CG.Syntax.html#4789" class="Bound">τ</a> <a id="4804" class="Symbol">→</a> <a id="4806" href="CG.Syntax.html#Thunk" class="Datatype">Thunk</a> <a id="4812" href="CG.Syntax.html#4787" class="Bound">Γ</a> <a id="4814" href="CG.Syntax.html#4789" class="Bound">τ</a>
<a id="4816" href="CG.Syntax.html#thunk" class="Function">thunk</a> <a id="4822" class="Symbol">=</a> <a id="4824" href="CG.Syntax.html#Conf.term" class="Field">Conf.term</a>

<a id="val" href="CG.Syntax.html#val" class="Function">val</a> <a id="4839" class="Symbol">:</a> <a id="4841" class="Symbol">∀</a> <a id="4843" class="Symbol">{</a><a id="4844" href="CG.Syntax.html#4844" class="Bound">τ</a><a id="4845" class="Symbol">}</a> <a id="4847" class="Symbol">→</a> <a id="4849" href="CG.Syntax.html#FConf" class="Function">FConf</a> <a id="4855" href="CG.Syntax.html#4844" class="Bound">τ</a> <a id="4857" class="Symbol">→</a> <a id="4859" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="4865" href="CG.Syntax.html#4844" class="Bound">τ</a>
<a id="4867" href="CG.Syntax.html#val" class="Function">val</a> <a id="4871" class="Symbol">=</a> <a id="4873" href="CG.Syntax.html#Conf.term" class="Field">Conf.term</a>

<a id="4884" class="Comment">--------------------------------------------------------------------------------</a>
<a id="4965" class="Comment">-- Weakening once and twice.</a>

<a id="_↑¹" href="CG.Syntax.html#_%E2%86%91%C2%B9" class="Function Operator">_↑¹</a> <a id="4999" class="Symbol">:</a> <a id="5001" class="Symbol">∀</a> <a id="5003" class="Symbol">{</a><a id="5004" href="CG.Syntax.html#5004" class="Bound">Γ</a> <a id="5006" href="CG.Syntax.html#5006" class="Bound">τ</a> <a id="5008" href="CG.Syntax.html#5008" class="Bound">τ₁</a><a id="5010" class="Symbol">}</a> <a id="5012" class="Symbol">→</a> <a id="5014" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="5019" href="CG.Syntax.html#5004" class="Bound">Γ</a> <a id="5021" href="CG.Syntax.html#5006" class="Bound">τ</a> <a id="5023" class="Symbol">→</a> <a id="5025" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="5030" class="Symbol">(</a><a id="5031" href="CG.Syntax.html#5008" class="Bound">τ₁</a> <a id="5034" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5036" href="CG.Syntax.html#5004" class="Bound">Γ</a><a id="5037" class="Symbol">)</a> <a id="5039" href="CG.Syntax.html#5006" class="Bound">τ</a>
<a id="5041" href="CG.Syntax.html#5041" class="Bound">e</a> <a id="5043" href="CG.Syntax.html#_%E2%86%91%C2%B9" class="Function Operator">↑¹</a> <a id="5046" class="Symbol">=</a> <a id="5048" href="CG.Syntax.html#Expr.wken" class="InductiveConstructor">wken</a> <a id="5053" href="CG.Syntax.html#5041" class="Bound">e</a> <a id="5055" class="Symbol">(</a><a id="5056" href="Generic.Context.Base.html#drop" class="InductiveConstructor">drop</a> <a id="5061" href="Generic.Context.Base.html#refl-%E2%8A%86" class="Function">refl-⊆</a><a id="5067" class="Symbol">)</a>

<a id="_↑²" href="CG.Syntax.html#_%E2%86%91%C2%B2" class="Function Operator">_↑²</a> <a id="5074" class="Symbol">:</a> <a id="5076" class="Symbol">∀</a> <a id="5078" class="Symbol">{</a><a id="5079" href="CG.Syntax.html#5079" class="Bound">Γ</a> <a id="5081" href="CG.Syntax.html#5081" class="Bound">τ</a> <a id="5083" href="CG.Syntax.html#5083" class="Bound">τ₁</a> <a id="5086" href="CG.Syntax.html#5086" class="Bound">τ₂</a><a id="5088" class="Symbol">}</a> <a id="5090" class="Symbol">→</a> <a id="5092" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="5097" href="CG.Syntax.html#5079" class="Bound">Γ</a> <a id="5099" href="CG.Syntax.html#5081" class="Bound">τ</a> <a id="5101" class="Symbol">→</a> <a id="5103" href="CG.Syntax.html#Expr" class="Datatype">Expr</a> <a id="5108" class="Symbol">(</a><a id="5109" href="CG.Syntax.html#5086" class="Bound">τ₂</a> <a id="5112" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5114" href="CG.Syntax.html#5083" class="Bound">τ₁</a> <a id="5117" href="Agda.Builtin.List.html#_%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5119" href="CG.Syntax.html#5079" class="Bound">Γ</a><a id="5120" class="Symbol">)</a> <a id="5122" href="CG.Syntax.html#5081" class="Bound">τ</a>
<a id="5124" href="CG.Syntax.html#5124" class="Bound">e</a> <a id="5126" href="CG.Syntax.html#_%E2%86%91%C2%B2" class="Function Operator">↑²</a> <a id="5129" class="Symbol">=</a> <a id="5131" href="CG.Syntax.html#Expr.wken" class="InductiveConstructor">wken</a> <a id="5136" href="CG.Syntax.html#5124" class="Bound">e</a> <a id="5138" class="Symbol">(</a><a id="5139" href="Generic.Context.Base.html#drop" class="InductiveConstructor">drop</a> <a id="5144" class="Symbol">(</a><a id="5145" href="Generic.Context.Base.html#drop" class="InductiveConstructor">drop</a> <a id="5150" href="Generic.Context.Base.html#refl-%E2%8A%86" class="Function">refl-⊆</a><a id="5156" class="Symbol">))</a>

<a id="5160" class="Comment">--------------------------------------------------------------------------------</a>
<a id="5241" class="Comment">-- Environment operations and proofs</a>

<a id="5279" class="Comment">-- Merge environments.</a>
<a id="_++ᴱ_" href="CG.Syntax.html#_%2B%2B%E1%B4%B1_" class="Function Operator">_++ᴱ_</a> <a id="5308" class="Symbol">:</a> <a id="5310" class="Symbol">∀</a> <a id="5312" class="Symbol">{</a><a id="5313" href="CG.Syntax.html#5313" class="Bound">Γ₁</a> <a id="5316" href="CG.Syntax.html#5316" class="Bound">Γ₂</a><a id="5318" class="Symbol">}</a> <a id="5320" class="Symbol">→</a> <a id="5322" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5326" href="CG.Syntax.html#5313" class="Bound">Γ₁</a> <a id="5329" class="Symbol">→</a> <a id="5331" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5335" href="CG.Syntax.html#5316" class="Bound">Γ₂</a> <a id="5338" class="Symbol">→</a> <a id="5340" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5344" class="Symbol">(</a><a id="5345" href="CG.Syntax.html#5313" class="Bound">Γ₁</a> <a id="5348" href="Data.List.Base.html#_%2B%2B_" class="Function Operator">++</a> <a id="5351" href="CG.Syntax.html#5316" class="Bound">Γ₂</a><a id="5353" class="Symbol">)</a>
<a id="5355" href="CG.Syntax.html#Env.%5B%5D" class="InductiveConstructor">[]</a> <a id="5358" href="CG.Syntax.html#_%2B%2B%E1%B4%B1_" class="Function Operator">++ᴱ</a> <a id="5362" href="CG.Syntax.html#5362" class="Bound">θ₂</a> <a id="5365" class="Symbol">=</a> <a id="5367" href="CG.Syntax.html#5362" class="Bound">θ₂</a>
<a id="5370" class="Symbol">(</a><a id="5371" href="CG.Syntax.html#5371" class="Bound">v</a> <a id="5373" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5375" href="CG.Syntax.html#5375" class="Bound">θ₁</a><a id="5377" class="Symbol">)</a> <a id="5379" href="CG.Syntax.html#_%2B%2B%E1%B4%B1_" class="Function Operator">++ᴱ</a> <a id="5383" href="CG.Syntax.html#5383" class="Bound">θ₂</a> <a id="5386" class="Symbol">=</a> <a id="5388" href="CG.Syntax.html#5371" class="Bound">v</a> <a id="5390" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5392" class="Symbol">(</a><a id="5393" href="CG.Syntax.html#5375" class="Bound">θ₁</a> <a id="5396" href="CG.Syntax.html#_%2B%2B%E1%B4%B1_" class="Function Operator">++ᴱ</a> <a id="5400" href="CG.Syntax.html#5383" class="Bound">θ₂</a><a id="5402" class="Symbol">)</a>

<a id="5405" class="Comment">-- Lookup a variable in the environment.</a>
<a id="_!!_" href="CG.Syntax.html#_%21%21_" class="Function Operator">_!!_</a> <a id="5451" class="Symbol">:</a> <a id="5453" class="Symbol">∀</a> <a id="5455" class="Symbol">{</a><a id="5456" href="CG.Syntax.html#5456" class="Bound">τ</a> <a id="5458" href="CG.Syntax.html#5458" class="Bound">Γ</a><a id="5459" class="Symbol">}</a> <a id="5461" class="Symbol">→</a> <a id="5463" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5467" href="CG.Syntax.html#5458" class="Bound">Γ</a> <a id="5469" class="Symbol">→</a> <a id="5471" href="CG.Syntax.html#5456" class="Bound">τ</a> <a id="5473" href="Data.List.Any.Membership.html#_%E2%88%88_" class="Function Operator">∈</a> <a id="5475" href="CG.Syntax.html#5458" class="Bound">Γ</a> <a id="5477" class="Symbol">→</a> <a id="5479" href="CG.Syntax.html#Value" class="Datatype">Value</a> <a id="5485" href="CG.Syntax.html#5456" class="Bound">τ</a>
<a id="5487" class="Symbol">(</a><a id="5488" href="CG.Syntax.html#5488" class="Bound">v</a> <a id="5490" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5492" href="CG.Syntax.html#5492" class="Bound">θ</a><a id="5493" class="Symbol">)</a> <a id="5495" href="CG.Syntax.html#_%21%21_" class="Function Operator">!!</a> <a id="5498" href="Generic.Context.Base.html#here" class="InductiveConstructor">here</a> <a id="5503" class="Symbol">=</a> <a id="5505" href="CG.Syntax.html#5488" class="Bound">v</a>
<a id="5507" class="Symbol">(</a><a id="5508" href="CG.Syntax.html#5508" class="Bound">v</a> <a id="5510" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5512" href="CG.Syntax.html#5512" class="Bound">θ</a><a id="5513" class="Symbol">)</a> <a id="5515" href="CG.Syntax.html#_%21%21_" class="Function Operator">!!</a> <a id="5518" class="Symbol">(</a><a id="5519" href="Generic.Context.Base.html#there" class="InductiveConstructor">there</a> <a id="5525" href="CG.Syntax.html#5525" class="Bound">τ∈Γ</a><a id="5528" class="Symbol">)</a> <a id="5530" class="Symbol">=</a> <a id="5532" href="CG.Syntax.html#5512" class="Bound">θ</a> <a id="5534" href="CG.Syntax.html#_%21%21_" class="Function Operator">!!</a> <a id="5537" href="CG.Syntax.html#5525" class="Bound">τ∈Γ</a>

<a id="5542" class="Comment">-- Shrink enviroment.</a>
<a id="slice" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5570" class="Symbol">:</a> <a id="5572" class="Symbol">∀</a> <a id="5574" class="Symbol">{</a><a id="5575" href="CG.Syntax.html#5575" class="Bound">Γ₁</a> <a id="5578" href="CG.Syntax.html#5578" class="Bound">Γ₂</a><a id="5580" class="Symbol">}</a> <a id="5582" class="Symbol">→</a> <a id="5584" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5588" href="CG.Syntax.html#5578" class="Bound">Γ₂</a> <a id="5591" class="Symbol">→</a> <a id="5593" href="CG.Syntax.html#5575" class="Bound">Γ₁</a> <a id="5596" href="Generic.Context.Base.html#_%E2%8A%86_" class="Datatype Operator">⊆</a> <a id="5598" href="CG.Syntax.html#5578" class="Bound">Γ₂</a> <a id="5601" class="Symbol">→</a> <a id="5603" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5607" href="CG.Syntax.html#5575" class="Bound">Γ₁</a>
<a id="5610" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5616" href="CG.Syntax.html#Env.%5B%5D" class="InductiveConstructor">[]</a> <a id="5619" href="Generic.Context.Base.html#base" class="InductiveConstructor">base</a> <a id="5624" class="Symbol">=</a> <a id="5626" href="CG.Syntax.html#Env.%5B%5D" class="InductiveConstructor">[]</a>
<a id="5629" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5635" class="Symbol">(</a><a id="5636" href="CG.Syntax.html#5636" class="Bound">v</a> <a id="5638" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5640" href="CG.Syntax.html#5640" class="Bound">θ</a><a id="5641" class="Symbol">)</a> <a id="5643" class="Symbol">(</a><a id="5644" href="Generic.Context.Base.html#cons" class="InductiveConstructor">cons</a> <a id="5649" href="CG.Syntax.html#5649" class="Bound">p</a><a id="5650" class="Symbol">)</a> <a id="5652" class="Symbol">=</a> <a id="5654" href="CG.Syntax.html#5636" class="Bound">v</a> <a id="5656" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5658" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5664" href="CG.Syntax.html#5640" class="Bound">θ</a> <a id="5666" href="CG.Syntax.html#5649" class="Bound">p</a>
<a id="5668" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5674" class="Symbol">(</a><a id="5675" href="CG.Syntax.html#5675" class="Bound">v</a> <a id="5677" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5679" href="CG.Syntax.html#5679" class="Bound">θ</a><a id="5680" class="Symbol">)</a> <a id="5682" class="Symbol">(</a><a id="5683" href="Generic.Context.Base.html#drop" class="InductiveConstructor">drop</a> <a id="5688" href="CG.Syntax.html#5688" class="Bound">p</a><a id="5689" class="Symbol">)</a> <a id="5691" class="Symbol">=</a> <a id="5693" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5699" href="CG.Syntax.html#5679" class="Bound">θ</a> <a id="5701" href="CG.Syntax.html#5688" class="Bound">p</a>

<a id="5704" class="Comment">--------------------------------------------------------------------------------</a>
<a id="5785" class="Comment">-- Basic proofs and rewriting.</a>

<a id="5817" class="Keyword">open</a> <a id="5822" class="Keyword">import</a> <a id="5829" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="slice-refl-⊆-≡" href="CG.Syntax.html#slice-refl-%E2%8A%86-%E2%89%A1" class="Function">slice-refl-⊆-≡</a> <a id="5883" class="Symbol">:</a> <a id="5885" class="Symbol">∀</a> <a id="5887" class="Symbol">{</a><a id="5888" href="CG.Syntax.html#5888" class="Bound">Γ</a><a id="5889" class="Symbol">}</a> <a id="5891" class="Symbol">{</a><a id="5892" href="CG.Syntax.html#5892" class="Bound">θ</a> <a id="5894" class="Symbol">:</a> <a id="5896" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="5900" href="CG.Syntax.html#5888" class="Bound">Γ</a><a id="5901" class="Symbol">}</a> <a id="5903" class="Symbol">→</a> <a id="5905" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="5911" href="CG.Syntax.html#5892" class="Bound">θ</a> <a id="5913" href="Generic.Context.Base.html#refl-%E2%8A%86" class="Function">refl-⊆</a> <a id="5920" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="5922" href="CG.Syntax.html#5892" class="Bound">θ</a>
<a id="5924" href="CG.Syntax.html#slice-refl-%E2%8A%86-%E2%89%A1" class="Function">slice-refl-⊆-≡</a> <a id="5939" class="Symbol">{</a><a id="5940" class="Argument">θ</a> <a id="5942" class="Symbol">=</a> <a id="5944" href="CG.Syntax.html#Env.%5B%5D" class="InductiveConstructor">[]</a><a id="5946" class="Symbol">}</a> <a id="5948" class="Symbol">=</a> <a id="5950" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>
<a id="5955" href="CG.Syntax.html#slice-refl-%E2%8A%86-%E2%89%A1" class="Function">slice-refl-⊆-≡</a> <a id="5970" class="Symbol">{</a><a id="5971" class="Argument">θ</a> <a id="5973" class="Symbol">=</a> <a id="5975" href="CG.Syntax.html#5975" class="Bound">v</a> <a id="5977" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="5979" href="CG.Syntax.html#5979" class="Bound">θ</a><a id="5980" class="Symbol">}</a> <a id="5982" class="Keyword">rewrite</a> <a id="5990" href="CG.Syntax.html#slice-refl-%E2%8A%86-%E2%89%A1" class="Function">slice-refl-⊆-≡</a> <a id="6005" class="Symbol">{_}</a> <a id="6009" class="Symbol">{</a><a id="6010" href="CG.Syntax.html#5979" class="Bound">θ</a><a id="6011" class="Symbol">}</a> <a id="6013" class="Symbol">=</a> <a id="6015" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>

<a id="6021" class="Symbol">{-#</a> <a id="6025" class="Keyword">REWRITE</a> <a id="6033" href="CG.Syntax.html#slice-refl-%E2%8A%86-%E2%89%A1" class="Function">slice-refl-⊆-≡</a> <a id="6048" class="Symbol">#-}</a>

<a id="slice-drop-⊆-≡" href="CG.Syntax.html#slice-drop-%E2%8A%86-%E2%89%A1" class="Function">slice-drop-⊆-≡</a> <a id="6068" class="Symbol">:</a> <a id="6070" class="Symbol">∀</a> <a id="6072" class="Symbol">{</a><a id="6073" href="CG.Syntax.html#6073" class="Bound">Γ₁</a> <a id="6076" href="CG.Syntax.html#6076" class="Bound">Γ₂</a><a id="6078" class="Symbol">}</a> <a id="6080" class="Symbol">(</a><a id="6081" href="CG.Syntax.html#6081" class="Bound">θ₁</a> <a id="6084" class="Symbol">:</a> <a id="6086" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="6090" href="CG.Syntax.html#6073" class="Bound">Γ₁</a><a id="6092" class="Symbol">)</a> <a id="6094" class="Symbol">(</a><a id="6095" href="CG.Syntax.html#6095" class="Bound">θ₂</a> <a id="6098" class="Symbol">:</a> <a id="6100" href="CG.Syntax.html#Env" class="Datatype">Env</a> <a id="6104" href="CG.Syntax.html#6076" class="Bound">Γ₂</a><a id="6106" class="Symbol">)</a> <a id="6108" class="Symbol">→</a> <a id="6110" href="CG.Syntax.html#slice" class="Function">slice</a> <a id="6116" class="Symbol">(</a><a id="6117" href="CG.Syntax.html#6095" class="Bound">θ₂</a> <a id="6120" href="CG.Syntax.html#_%2B%2B%E1%B4%B1_" class="Function Operator">++ᴱ</a> <a id="6124" href="CG.Syntax.html#6081" class="Bound">θ₁</a><a id="6126" class="Symbol">)</a> <a id="6128" class="Symbol">(</a><a id="6129" href="Generic.Context.Base.html#drop-%E2%8A%86%E2%82%82" class="Function">drop-⊆₂</a> <a id="6137" href="CG.Syntax.html#6073" class="Bound">Γ₁</a> <a id="6140" href="CG.Syntax.html#6076" class="Bound">Γ₂</a><a id="6142" class="Symbol">)</a> <a id="6144" href="Agda.Builtin.Equality.html#_%E2%89%A1_" class="Datatype Operator">≡</a> <a id="6146" href="CG.Syntax.html#6081" class="Bound">θ₁</a>
<a id="6149" href="CG.Syntax.html#slice-drop-%E2%8A%86-%E2%89%A1" class="Function">slice-drop-⊆-≡</a> <a id="6164" href="CG.Syntax.html#6164" class="Bound">θ₁</a> <a id="6167" href="CG.Syntax.html#Env.%5B%5D" class="InductiveConstructor">[]</a> <a id="6170" class="Symbol">=</a> <a id="6172" href="Agda.Builtin.Equality.html#_%E2%89%A1_.refl" class="InductiveConstructor">refl</a>
<a id="6177" href="CG.Syntax.html#slice-drop-%E2%8A%86-%E2%89%A1" class="Function">slice-drop-⊆-≡</a> <a id="6192" href="CG.Syntax.html#6192" class="Bound">θ₁</a> <a id="6195" class="Symbol">(</a><a id="6196" href="CG.Syntax.html#6196" class="Bound">v</a> <a id="6198" href="CG.Syntax.html#Env._%E2%88%B7_" class="InductiveConstructor Operator">∷</a> <a id="6200" href="CG.Syntax.html#6200" class="Bound">θ₂</a><a id="6202" class="Symbol">)</a> <a id="6204" class="Symbol">=</a> <a id="6206" href="CG.Syntax.html#slice-drop-%E2%8A%86-%E2%89%A1" class="Function">slice-drop-⊆-≡</a> <a id="6221" href="CG.Syntax.html#6192" class="Bound">θ₁</a> <a id="6224" href="CG.Syntax.html#6200" class="Bound">θ₂</a>

<a id="6228" class="Symbol">{-#</a> <a id="6232" class="Keyword">REWRITE</a> <a id="6240" href="CG.Syntax.html#slice-drop-%E2%8A%86-%E2%89%A1" class="Function">slice-drop-⊆-≡</a> <a id="6255" class="Symbol">#-}</a>
</pre></body></html>