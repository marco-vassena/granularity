<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>FG2CG.Recovery</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">-- This module recovers a FG TINI proof from CG TINI and the FG → CG</a>
<a id="70" class="Comment">-- translation.</a>

<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Lattice.html" class="Module">Lattice</a>

<a id="108" class="Keyword">module</a> <a id="115" href="FG2CG.Recovery.html" class="Module">FG2CG.Recovery</a> <a id="130" class="Symbol">{{</a><a id="132" href="FG2CG.Recovery.html#132" class="Bound">𝑳</a> <a id="134" class="Symbol">:</a> <a id="136" href="Lattice.html#Lattice" class="Function">Lattice</a><a id="143" class="Symbol">}}</a> <a id="146" class="Symbol">(</a><a id="147" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="149" class="Symbol">:</a> <a id="151" href="Lattice.Base.html#Label" class="Field">Label</a><a id="156" class="Symbol">)</a> <a id="158" class="Keyword">where</a>

<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="FG.html" class="Module">FG</a> <a id="180" class="Symbol">as</a> <a id="183" class="Module">FG</a>
<a id="186" class="Keyword">open</a> <a id="191" class="Keyword">import</a> <a id="198" href="CG.html" class="Module">CG</a> <a id="201" class="Symbol">as</a> <a id="204" class="Module">CG</a>
<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="CG.Security.html" class="Module">CG.Security</a> <a id="231" href="FG2CG.Recovery.html#147" class="Bound">A</a>
<a id="233" class="Keyword">open</a> <a id="238" class="Keyword">import</a> <a id="245" href="FG.LowEq.html" class="Module">FG.LowEq</a> <a id="254" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="256" class="Symbol">as</a> <a id="F" href="FG2CG.Recovery.html#F" class="Module">F</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="FG2CG.Correct.html" class="Module">FG2CG.Correct</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="FG2CG.Recovery.Lift.html" class="Module">FG2CG.Recovery.Lift</a> <a id="319" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="321" class="Keyword">public</a>
<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="FG2CG.Recovery.Unlift.html" class="Module">FG2CG.Recovery.Unlift</a> <a id="362" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="364" class="Keyword">public</a>

<a id="372" class="Comment">-- Recovery of TINI</a>
<a id="392" class="Comment">--</a>
<a id="395" class="Comment">-- The proof is structured as follows:</a>
<a id="434" class="Comment">-- 1) Apply the semantics preserving transformation.</a>
<a id="487" class="Comment">-- 2) Lift L-equivalence of initial configurations and environments from FG to CG.</a>
<a id="570" class="Comment">-- 3) Apply CG TINI to CG translated program and obtain CG L-equivalence.</a>
<a id="644" class="Comment">-- 4) Back-translate L-equivalence of final configurations from CG to FG (unlifting).</a>

<a id="tini-via-cg" href="FG2CG.Recovery.html#tini-via-cg" class="Function">tini-via-cg</a> <a id="743" class="Symbol">:</a>  <a id="746" class="Symbol">∀</a> <a id="748" class="Symbol">{</a><a id="749" href="FG2CG.Recovery.html#749" class="Bound">τ</a> <a id="751" href="FG2CG.Recovery.html#751" class="Bound">Γ</a> <a id="753" href="FG2CG.Recovery.html#753" class="Bound">θ₁</a> <a id="756" href="FG2CG.Recovery.html#756" class="Bound">θ₂</a> <a id="759" href="FG2CG.Recovery.html#759" class="Bound">pc</a><a id="761" class="Symbol">}</a> <a id="763" class="Symbol">{</a><a id="764" href="FG2CG.Recovery.html#764" class="Bound">c₁</a> <a id="767" href="FG2CG.Recovery.html#767" class="Bound">c₂</a> <a id="770" class="Symbol">:</a> <a id="772" href="FG.Syntax.html#IConf" class="Function">FG.IConf</a> <a id="781" href="FG2CG.Recovery.html#751" class="Bound">Γ</a> <a id="783" href="FG2CG.Recovery.html#749" class="Bound">τ</a><a id="784" class="Symbol">}</a> <a id="786" class="Symbol">{</a><a id="787" href="FG2CG.Recovery.html#787" class="Bound">c₁&#39;</a> <a id="791" href="FG2CG.Recovery.html#791" class="Bound">c₂&#39;</a> <a id="795" class="Symbol">:</a> <a id="797" href="FG.Syntax.html#FConf" class="Function">FG.FConf</a> <a id="806" href="FG2CG.Recovery.html#749" class="Bound">τ</a><a id="807" class="Symbol">}</a> <a id="809" class="Symbol">→</a>
                 <a id="828" href="FG2CG.Recovery.html#764" class="Bound">c₁</a> <a id="831" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">⇓⟨</a> <a id="834" href="FG2CG.Recovery.html#753" class="Bound">θ₁</a> <a id="837" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">,</a> <a id="839" href="FG2CG.Recovery.html#759" class="Bound">pc</a> <a id="842" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">⟩</a> <a id="844" href="FG2CG.Recovery.html#787" class="Bound">c₁&#39;</a> <a id="848" class="Symbol">→</a>
                 <a id="867" href="FG2CG.Recovery.html#767" class="Bound">c₂</a> <a id="870" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">⇓⟨</a> <a id="873" href="FG2CG.Recovery.html#756" class="Bound">θ₂</a> <a id="876" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">,</a> <a id="878" href="FG2CG.Recovery.html#759" class="Bound">pc</a> <a id="881" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">⟩</a> <a id="883" href="FG2CG.Recovery.html#791" class="Bound">c₂&#39;</a> <a id="887" class="Symbol">→</a>
                 <a id="906" href="FG2CG.Recovery.html#764" class="Bound">c₁</a> <a id="909" href="FG.LowEq.html#F._%E2%89%88%E1%B4%B5_" class="Function Operator">F.≈ᴵ</a> <a id="914" href="FG2CG.Recovery.html#767" class="Bound">c₂</a> <a id="917" class="Symbol">→</a>
                 <a id="936" href="FG2CG.Recovery.html#753" class="Bound">θ₁</a> <a id="939" href="FG.LowEq.html#F._%E2%89%88%E1%B4%B1_" class="Datatype Operator">F.≈ᴱ</a> <a id="944" href="FG2CG.Recovery.html#756" class="Bound">θ₂</a> <a id="947" class="Symbol">→</a>
                 <a id="966" href="FG2CG.Recovery.html#787" class="Bound">c₁&#39;</a> <a id="970" href="FG.LowEq.html#F._%E2%89%88%E1%B6%9C_" class="Function Operator">F.≈ᶜ</a> <a id="975" href="FG2CG.Recovery.html#791" class="Bound">c₂&#39;</a>
<a id="979" href="FG2CG.Recovery.html#tini-via-cg" class="Function">tini-via-cg</a> <a id="991" class="Symbol">{</a><a id="992" class="Argument">pc</a> <a id="995" class="Symbol">=</a> <a id="997" href="FG2CG.Recovery.html#997" class="Bound">pc</a><a id="999" class="Symbol">}</a> <a id="1001" href="FG2CG.Recovery.html#1001" class="Bound">x₁</a> <a id="1004" href="FG2CG.Recovery.html#1004" class="Bound">x₂</a> <a id="1007" href="FG2CG.Recovery.html#1007" class="Bound">c₁≈c₂</a> <a id="1013" href="FG2CG.Recovery.html#1013" class="Bound">θ₁≈θ₂</a> <a id="1019" class="Keyword">with</a> <a id="1024" href="FG2CG.Correct.html#fg2cg%E1%B6%A0" class="Function">fg2cgᶠ</a> <a id="1031" href="FG2CG.Recovery.html#1001" class="Bound">x₁</a> <a id="1034" class="Symbol">|</a> <a id="1036" href="FG2CG.Correct.html#fg2cg%E1%B6%A0" class="Function">fg2cgᶠ</a> <a id="1043" href="FG2CG.Recovery.html#1004" class="Bound">x₂</a> <a id="1046" class="Symbol">|</a> <a id="1048" href="FG2CG.Recovery.Lift.html#lift-%E2%89%88%E1%B4%B5" class="Function">lift-≈ᴵ</a> <a id="1056" href="FG2CG.Recovery.html#997" class="Bound">pc</a> <a id="1059" href="FG2CG.Recovery.html#1007" class="Bound">c₁≈c₂</a> <a id="1065" class="Symbol">|</a> <a id="1067" href="FG2CG.Recovery.Lift.html#lift-%E2%89%88%E1%B4%B1" class="Function">lift-≈ᴱ</a> <a id="1075" href="FG2CG.Recovery.html#1013" class="Bound">θ₁≈θ₂</a>
<a id="1081" class="Symbol">...</a> <a id="1085" class="Symbol">|</a> <a id="1087" href="FG2CG.Recovery.html#1087" class="Bound">x₁&#39;</a> <a id="1091" class="Symbol">|</a> <a id="1093" href="FG2CG.Recovery.html#1093" class="Bound">x₂&#39;</a> <a id="1097" class="Symbol">|</a> <a id="1099" href="FG2CG.Recovery.html#1099" class="Bound">⟪c₁≈c₂⟫</a> <a id="1107" class="Symbol">|</a> <a id="1109" href="FG2CG.Recovery.html#1109" class="Bound">⟪θ₁≈θ₂⟫</a> <a id="1117" class="Keyword">with</a> <a id="1122" href="CG.Security.html#9181" class="Function">tiniᶠ</a> <a id="1128" href="FG2CG.Recovery.html#1087" class="Bound">x₁&#39;</a> <a id="1132" href="FG2CG.Recovery.html#1093" class="Bound">x₂&#39;</a> <a id="1136" href="FG2CG.Recovery.html#1099" class="Bound">⟪c₁≈c₂⟫</a> <a id="1144" href="FG2CG.Recovery.html#1109" class="Bound">⟪θ₁≈θ₂⟫</a>
<a id="1152" class="Symbol">...</a> <a id="1156" class="Symbol">|</a> <a id="1158" href="FG2CG.Recovery.html#1158" class="Bound">⟪c₁&#39;≈c₂&#39;⟫</a> <a id="1168" class="Symbol">=</a> <a id="1170" href="FG2CG.Recovery.Unlift.html#unlift-%E2%89%88%E1%B6%9C" class="Function">unlift-≈ᶜ</a> <a id="1180" class="Symbol">(</a><a id="1181" href="FG.Semantics.html#step-%E2%8A%91" class="Function">FG.step-⊑</a> <a id="1191" class="Bound">x₁</a><a id="1193" class="Symbol">)</a> <a id="1195" class="Symbol">(</a><a id="1196" href="FG.Semantics.html#step-%E2%8A%91" class="Function">FG.step-⊑</a> <a id="1206" class="Bound">x₂</a><a id="1208" class="Symbol">)</a> <a id="1210" href="FG2CG.Recovery.html#1158" class="Bound">⟪c₁&#39;≈c₂&#39;⟫</a>
</pre></body></html>